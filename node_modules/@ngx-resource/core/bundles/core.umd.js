(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["ngx-resource-core"] = factory();
	else
		root["ngx-resource-core"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ResourceRequestBodyType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ResourceResponseBodyType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ResourceRequestMethod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceQueryMappingMethod; });
var ResourceRequestBodyType;
(function (ResourceRequestBodyType) {
    ResourceRequestBodyType[ResourceRequestBodyType["NONE"] = 0] = "NONE";
    ResourceRequestBodyType[ResourceRequestBodyType["JSON"] = 1] = "JSON";
    ResourceRequestBodyType[ResourceRequestBodyType["FORM"] = 2] = "FORM";
    ResourceRequestBodyType[ResourceRequestBodyType["FORM_DATA"] = 3] = "FORM_DATA";
    ResourceRequestBodyType[ResourceRequestBodyType["TEXT"] = 4] = "TEXT";
    ResourceRequestBodyType[ResourceRequestBodyType["BLOB"] = 5] = "BLOB";
    ResourceRequestBodyType[ResourceRequestBodyType["ARRAY_BUFFER"] = 6] = "ARRAY_BUFFER";
})(ResourceRequestBodyType || (ResourceRequestBodyType = {}));
var ResourceResponseBodyType;
(function (ResourceResponseBodyType) {
    ResourceResponseBodyType[ResourceResponseBodyType["Text"] = 1] = "Text";
    ResourceResponseBodyType[ResourceResponseBodyType["Json"] = 2] = "Json";
    ResourceResponseBodyType[ResourceResponseBodyType["ArrayBuffer"] = 3] = "ArrayBuffer";
    ResourceResponseBodyType[ResourceResponseBodyType["Blob"] = 4] = "Blob";
})(ResourceResponseBodyType || (ResourceResponseBodyType = {}));
var ResourceRequestMethod;
(function (ResourceRequestMethod) {
    ResourceRequestMethod[ResourceRequestMethod["Get"] = 1] = "Get";
    ResourceRequestMethod[ResourceRequestMethod["Post"] = 2] = "Post";
    ResourceRequestMethod[ResourceRequestMethod["Put"] = 3] = "Put";
    ResourceRequestMethod[ResourceRequestMethod["Delete"] = 4] = "Delete";
    ResourceRequestMethod[ResourceRequestMethod["Options"] = 5] = "Options";
    ResourceRequestMethod[ResourceRequestMethod["Head"] = 6] = "Head";
    ResourceRequestMethod[ResourceRequestMethod["Patch"] = 7] = "Patch";
})(ResourceRequestMethod || (ResourceRequestMethod = {}));
var ResourceQueryMappingMethod;
(function (ResourceQueryMappingMethod) {
    ResourceQueryMappingMethod[ResourceQueryMappingMethod["Plain"] = 1] = "Plain";
    ResourceQueryMappingMethod[ResourceQueryMappingMethod["Bracket"] = 2] = "Bracket";
    ResourceQueryMappingMethod[ResourceQueryMappingMethod["JQueryParamsBracket"] = 3] = "JQueryParamsBracket";
    ResourceQueryMappingMethod[ResourceQueryMappingMethod["None"] = 99] = "None";
})(ResourceQueryMappingMethod || (ResourceQueryMappingMethod = {}));


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceHelper; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Declarations__ = __webpack_require__(0);

var ResourceHelper = /** @class */ (function () {
    function ResourceHelper() {
    }
    ResourceHelper.isRunningInBrowser = function () {
        if (this.isBrowser !== null) {
            return this.isBrowser;
        }
        try {
            this.isBrowser = !!window;
        }
        catch (e) {
            this.isBrowser = false;
        }
        return this.isBrowser;
    };
    ResourceHelper.getRealTypeOf = function (data) {
        if (!data) {
            return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].NONE;
        }
        if (this.isRunningInBrowser()) {
            if (FormData && data instanceof FormData) {
                return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].FORM_DATA;
            }
            if (Blob && data instanceof Blob) {
                return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].BLOB;
            }
        }
        if (data instanceof ArrayBuffer) {
            return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].ARRAY_BUFFER;
        }
        if (['string', 'number'].indexOf(typeof data) > -1) {
            return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].TEXT;
        }
        return __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].JSON;
    };
    ResourceHelper.defaults = function (dst, src) {
        if (!dst) {
            dst = {};
        }
        Object.keys(src)
            .forEach(function (key) {
            if (dst[key] === undefined) {
                dst[key] = src[key];
            }
        });
        return dst;
    };
    ResourceHelper.isNullOrUndefined = function (value) {
        return value === null || value === undefined;
    };
    ResourceHelper.cleanData = function (obj) {
        if (Array.isArray(obj)) {
            return this.cleanDataArray(obj);
        }
        else {
            return this.cleanDataObject(obj);
        }
    };
    ResourceHelper.cleanDataArray = function (obj) {
        for (var propName in obj) {
            if (typeof obj[propName] === 'function' || this.cleanDataFields.indexOf(propName) > -1) {
                delete obj[propName];
            }
        }
        return obj;
    };
    ResourceHelper.cleanDataObject = function (obj) {
        var cleanedObj = {};
        for (var propName in obj) {
            if (typeof obj[propName] !== 'function' && this.cleanDataFields.indexOf(propName) === -1) {
                cleanedObj[propName] = obj[propName];
            }
        }
        return cleanedObj;
    };
    ResourceHelper.cleanDataFields = [
        '$resolved',
        '$promise',
        '$abort',
        '$resource'
    ];
    ResourceHelper.isBrowser = null;
    return ResourceHelper;
}());



/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Resource; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Declarations__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ResourceHelper__ = __webpack_require__(1);
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};



var Resource = /** @class */ (function () {
    function Resource(requestHandler) {
        this.requestHandler = requestHandler;
        this.$url = null;
        this.$pathPrefix = null;
        this.$path = null;
        this.$headers = null;
        this.$body = null;
        this.$params = null;
        this.$query = null;
        this.constructor.instance = this;
    }
    /**
     * Used to get url
     *
     * @param {IResourceAction} actionOptions
     * @return {string | Promise<string>}
     */
    Resource.prototype.$getUrl = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$url || actionOptions.url || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].url || '';
    };
    Resource.prototype.$setUrl = function (url) {
        this.$url = url;
    };
    /**
     * Used to get path prefix
     *
     * @param {IResourceAction} actionOptions
     * @return {string | Promise<string>}
     */
    Resource.prototype.$getPathPrefix = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$pathPrefix || actionOptions.pathPrefix || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].pathPrefix || '';
    };
    Resource.prototype.$setPathPrefix = function (path) {
        this.$pathPrefix = path;
    };
    /**
     * Used to get path
     *
     * @param {IResourceAction} actionOptions
     * @return {string | Promise<string>}
     */
    Resource.prototype.$getPath = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$path || actionOptions.path || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].path || '';
    };
    Resource.prototype.$setPath = function (path) {
        this.$path = path;
    };
    /**
     * Get headers.
     *
     * @param {IResourceAction} actionOptions
     * @return {any | Promise<any>}
     */
    Resource.prototype.$getHeaders = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$headers || actionOptions.headers || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].headers || {};
    };
    Resource.prototype.$setHeaders = function (headers) {
        this.$headers = headers;
    };
    /**
     * Get body
     *
     * @param {IResourceAction} actionOptions
     * @return {any | Promise<any>}
     */
    Resource.prototype.$getBody = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$body || actionOptions.body || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].body || {};
    };
    Resource.prototype.$setBody = function (body) {
        this.$body = body;
    };
    /**
     * Get path params
     *
     * @param {IResourceAction} actionOptions
     * @return {any | Promise<any>}
     */
    Resource.prototype.$getParams = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$params || actionOptions.params || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].params || {};
    };
    Resource.prototype.$setParams = function (params) {
        this.$params = params;
    };
    /**
     * Get query params
     *
     * @param {IResourceAction} actionOptions
     * @return {any | Promise<any>}
     */
    Resource.prototype.$getQuery = function (actionOptions) {
        if (actionOptions === void 0) { actionOptions = {}; }
        return this.$query || actionOptions.query || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].query || {};
    };
    Resource.prototype.$setQuery = function (query) {
        this.$query = query;
    };
    /**
     * Used to filter received data.
     * Is applied on each element of array or object
     *
     * @param data
     * @param {IResourceActionInner} options
     * @return {boolean}
     */
    Resource.prototype.$filter = function (data, options) {
        if (options === void 0) { options = {}; }
        return true;
    };
    /**
     * Used to map received data
     * Is applied on each element of array or object
     *
     * @param data
     * @param {IResourceActionInner} options
     * @return {any}
     */
    Resource.prototype.$map = function (data, options) {
        if (options === void 0) { options = {}; }
        return data;
    };
    /**
     * Used to create result object
     * Is applied on each element of array or object
     *
     * @param data
     * @param {IResourceActionInner} options
     * @return {any}
     */
    Resource.prototype.$resultFactory = function (data, options) {
        if (options === void 0) { options = {}; }
        return data || {};
    };
    Resource.prototype.$restAction = function (options) {
        var _this = this;
        this.$_setResourceActionInnerDefaults(options);
        this.$_setResourceActionOptionDefaults(options);
        var actionOptions = options.actionOptions;
        if (actionOptions.mutateBody || options.isModel) {
            options.returnData = options.actionAttributes.body;
        }
        if (!actionOptions.asPromise) {
            options.returnData = actionOptions.expectJsonArray ? [] : actionOptions.resultFactory.call(this, null, options);
        }
        if (this.$_canSetInternalData(options)) {
            Object.defineProperty(options.returnData, '$resolved', {
                enumerable: false,
                configurable: true,
                writable: true,
                value: false
            });
            Object.defineProperty(options.returnData, '$abort', {
                enumerable: false,
                configurable: true,
                writable: true,
                value: function () {
                    // does nothing for now
                }
            });
        }
        options.mainPromise = this.$_setResolvedOptions(options)
            .then(function (o) { return _this.$_createRequestOptions(o); })
            .then(function (o) {
            var handlerResp = _this.requestHandler.handle(o.requestOptions);
            if (o.returnData && _this.$_canSetInternalData(options)) {
                o.returnData.$abort = handlerResp.abort;
            }
            return handlerResp.promise;
        })
            .then(function (resp) { return _this.$handleSuccessResponse(options, resp); })
            .catch(function (resp) { return _this.$handleErrorResponse(options, resp); });
        if (this.$_canSetInternalData(options)) {
            Object.defineProperty(options.returnData, '$promise', {
                enumerable: false,
                configurable: true,
                writable: true,
                value: options.mainPromise
            });
        }
        return actionOptions.asPromise ? options.mainPromise : options.returnData;
    };
    Resource.prototype.$handleSuccessResponse = function (options, resp) {
        var _this = this;
        var body = resp.body;
        var actionOptions = options.actionOptions;
        if (Array.isArray(body)) {
            body = body
                .filter(function (item) { return actionOptions.filter.call(_this, item, options); })
                .map(function (item) {
                item = actionOptions.map.call(_this, item, options);
                return actionOptions.resultFactory.call(_this, item, options);
            });
            if (options.returnData) {
                Array.prototype.push.apply(options.returnData, body);
                body = options.returnData;
            }
        }
        else {
            if (actionOptions.filter.call(this, body, options)) {
                body = actionOptions.map.call(this, body, options);
                var newBody = options.returnData;
                if (newBody) {
                    if (typeof newBody.$setData === 'function') {
                        newBody.$setData(body);
                    }
                    else {
                        Object.assign(newBody, body);
                    }
                }
                else {
                    newBody = actionOptions.resultFactory.call(this, body, options);
                }
                body = newBody;
                // If it's model
                if (body.$resource) {
                    body.$resolved = true;
                    body.$promise = options.mainPromise;
                    body.$abort = function () { return true; };
                }
            }
            else {
                body = null;
            }
        }
        if (this.$_canSetInternalData(options)) {
            options.returnData.$resolved = true;
        }
        if (options.actionOptions.asResourceResponse) {
            resp.body = body;
            body = resp;
        }
        if (options.actionAttributes.onSuccess) {
            options.actionAttributes.onSuccess(body);
        }
        return body;
    };
    Resource.prototype.$handleErrorResponse = function (options, resp) {
        if (options.returnData && this.$_canSetInternalData(options)) {
            options.returnData.$resolved = true;
        }
        if (options.actionAttributes.onError) {
            options.actionAttributes.onError(resp);
        }
        throw resp;
    };
    Resource.prototype.$setRequestOptionsUrl = function (options) {
        var ro = options.requestOptions;
        if (!ro.url) {
            ro.url =
                options.resolvedOptions.url +
                    options.resolvedOptions.pathPrefix +
                    options.resolvedOptions.path;
        }
        options.usedInPath = {};
        var params = __WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].defaults(options.actionAttributes.params, options.resolvedOptions.params);
        var pathParams = ro.url.match(/{([^}]*)}/g) || [];
        for (var i = 0; i < pathParams.length; i++) {
            var pathParam = pathParams[i];
            var pathKey = pathParam.substr(1, pathParam.length - 2);
            var isMandatory = pathKey[0] === '!';
            if (isMandatory) {
                pathKey = pathKey.substr(1);
            }
            var onlyPathParam = pathKey[0] === ':';
            if (onlyPathParam) {
                pathKey = pathKey.substr(1);
            }
            if (options.actionAttributes.query && options.actionAttributes.query === options.actionAttributes.params) {
                options.usedInPath[pathKey] = true;
            }
            var value = params[pathKey];
            if (onlyPathParam) {
                delete params[pathKey];
            }
            if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(value)) {
                if (isMandatory) {
                    var consoleMsg = "Mandatory " + pathParam + " path parameter is missing";
                    console.warn(consoleMsg);
                    // shell.mainObservable = Observable.create((observer: any) => {
                    //   observer.error(new Error(consoleMsg));
                    // });
                    //
                    //
                    // this.$_releaseMainDeferredSubscriber(shell);
                    throw new Error(consoleMsg);
                }
                ro.url = ro.url.substr(0, ro.url.indexOf(pathParam));
                break;
            }
            // Replacing in the url
            ro.url = ro.url.replace(pathParam, value);
        }
        // Removing double slashed from final url
        ro.url = ro.url.replace(/\/\/+/g, '/');
        if (ro.url.startsWith('http')) {
            ro.url = ro.url.replace(':/', '://');
        }
        // Remove trailing slash
        if (options.actionOptions.removeTrailingSlash) {
            while (ro.url[ro.url.length - 1] === '/') {
                ro.url = ro.url.substr(0, ro.url.length - 1);
            }
        }
    };
    Resource.prototype.$setRequestOptionsBody = function (options) {
        var body = options.actionAttributes.body;
        if (!body) {
            return;
        }
        var realBodyType = __WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].getRealTypeOf(body);
        var bodyOk = realBodyType === options.actionOptions.requestBodyType;
        if (!bodyOk) {
            if (realBodyType === __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].JSON) {
                if (options.actionOptions.requestBodyType === __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].FORM_DATA) {
                    var newBody_1 = new FormData();
                    Object.keys(body).forEach(function (key) {
                        var value = body[key];
                        if (body.hasOwnProperty(key) && typeof value !== 'function') {
                            var isArrayOfFiles = value instanceof Array && value.reduce(function (acc, elem) { return acc && elem instanceof File; }, true);
                            if (isArrayOfFiles) {
                                value.forEach(function (f, index) {
                                    newBody_1.append(key + "[" + index + "]", f, f.name);
                                });
                            }
                            else if (value instanceof File) {
                                newBody_1.append(key, value, value.name);
                            }
                            else if (!options.actionOptions.rootNode) {
                                newBody_1.append(key, value);
                            }
                        }
                    });
                    if (options.actionOptions.rootNode) {
                        newBody_1.append(options.actionOptions.rootNode, JSON.stringify(body));
                    }
                    body = newBody_1;
                    bodyOk = true;
                }
            }
        }
        if (!bodyOk) {
            throw new Error('Can not convert body');
        }
        if (!(body instanceof FormData)) {
            // Add root node if needed
            if (options.actionOptions.rootNode) {
                var newBody = {};
                newBody[options.actionOptions.rootNode] = body;
                body = newBody;
            }
            if ((options.actionOptions.requestBodyType === __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].NONE ||
                (options.actionOptions.requestBodyType === __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].JSON &&
                    typeof body === 'object' && Object.keys(body).length === 0)) && !options.actionOptions.keepEmptyBody) {
                return;
            }
        }
        options.requestOptions.body = body;
    };
    Resource.prototype.$setRequestOptionsQuery = function (options) {
        var _this = this;
        var oq = options.actionAttributes.query || {};
        if (options.resolvedOptions.query) {
            oq = __assign({}, options.resolvedOptions.query, oq);
        }
        if (oq) {
            options.requestOptions.query = {};
            Object.keys(oq).forEach(function (key) {
                if (oq.hasOwnProperty(key) && !options.usedInPath[key]) {
                    _this.$appendQueryParams(options.requestOptions.query, key, oq[key], options.queryMappingMethod);
                }
            });
        }
        if (options.actionOptions.addTimestamp) {
            options.requestOptions.query = options.requestOptions.query || {};
            this.$appendQueryParams(options.requestOptions.query, options.actionOptions.addTimestamp, Date.now().toString(10), options.queryMappingMethod);
        }
    };
    Resource.prototype.$appendQueryParams = function (query, key, value, queryMappingMethod) {
        if (value instanceof Date) {
            query[key] = value.toISOString();
            return;
        }
        if (typeof value === 'object') {
            switch (queryMappingMethod) {
                case __WEBPACK_IMPORTED_MODULE_0__Declarations__["a" /* ResourceQueryMappingMethod */].Plain:
                    if (Array.isArray(value)) {
                        query[key] = value.join(',');
                        // for (const arrValue of value) {
                        //   query[key] = arrValue;
                        // }
                    }
                    else {
                        if (value && typeof value === 'object') {
                            /// Convert dates to ISO format string
                            if (value instanceof Date) {
                                value = value.toISOString();
                            }
                            else {
                                value = JSON.stringify(value);
                            }
                        }
                        query[key] = value;
                    }
                    return;
                case __WEBPACK_IMPORTED_MODULE_0__Declarations__["a" /* ResourceQueryMappingMethod */].Bracket:
                    /// Convert object and arrays to query params
                    for (var k in value) {
                        if (value.hasOwnProperty(k)) {
                            this.$appendQueryParams(query, key + "[" + k + "]", value[k], queryMappingMethod);
                        }
                    }
                    return;
                case __WEBPACK_IMPORTED_MODULE_0__Declarations__["a" /* ResourceQueryMappingMethod */].JQueryParamsBracket:
                    /// Convert object and arrays to query params according to $.params
                    for (var k in value) {
                        if (value.hasOwnProperty(k)) {
                            var path = key + "[" + k + "]";
                            if (Array.isArray(value) && typeof value[k] !== 'object') {
                                path = key + "[]";
                            }
                            this.$appendQueryParams(query, path, value[k], queryMappingMethod);
                        }
                    }
                    return;
            }
        }
        query[key] = value;
    };
    Resource.prototype.$_setResourceActionInnerDefaults = function (options) {
        var actionOptions = options.actionOptions;
        // Setting default request method
        if (!actionOptions.method) {
            actionOptions.method = __WEBPACK_IMPORTED_MODULE_0__Declarations__["c" /* ResourceRequestMethod */].Get;
        }
        var actionAttributes = options.actionAttributes;
        if (actionAttributes.body) {
            // Setting default request content type
            if (!actionOptions.requestBodyType) {
                actionOptions.requestBodyType = __WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].getRealTypeOf(actionAttributes.body);
            }
            // Setting params and query if needed
            if (actionOptions.requestBodyType === __WEBPACK_IMPORTED_MODULE_0__Declarations__["b" /* ResourceRequestBodyType */].JSON &&
                typeof actionAttributes.body === 'object' && !Array.isArray(actionAttributes.body)) {
                if (!actionAttributes.params) {
                    actionAttributes.params = actionAttributes.body;
                }
                options.isModel = !!actionAttributes.body.$resource;
            }
        }
        actionAttributes.params = actionAttributes.params || {};
        if (!actionAttributes.query && actionOptions.method === __WEBPACK_IMPORTED_MODULE_0__Declarations__["c" /* ResourceRequestMethod */].Get) {
            actionAttributes.query = actionAttributes.params;
        }
        options.queryMappingMethod = actionOptions.queryMappingMethod || __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].queryMappingMethod;
    };
    Resource.prototype.$_setResourceActionOptionDefaults = function (options) {
        var actionOptions = options.actionOptions;
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.filter)) {
            actionOptions.filter = this.$filter;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.map)) {
            actionOptions.map = this.$map;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.resultFactory)) {
            actionOptions.resultFactory = this.$resultFactory;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.removeTrailingSlash)) {
            actionOptions.removeTrailingSlash = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].removeTrailingSlash;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.withCredentials)) {
            actionOptions.withCredentials = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].withCredentials;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.asPromise)) {
            actionOptions.asPromise = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].asPromise;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.asResourceResponse)) {
            actionOptions.asResourceResponse = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].asResourceResponse;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.responseBodyType)) {
            actionOptions.responseBodyType = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].responseBodyType;
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.lean)) {
            actionOptions.lean = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].lean;
            if (actionOptions.mutateBody && !actionOptions.asPromise && __WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.lean)) {
                actionOptions.lean = true;
            }
        }
        if (__WEBPACK_IMPORTED_MODULE_2__ResourceHelper__["a" /* ResourceHelper */].isNullOrUndefined(actionOptions.addTimestamp)) {
            actionOptions.addTimestamp = __WEBPACK_IMPORTED_MODULE_1__ResourceGlobalConfig__["a" /* ResourceGlobalConfig */].addTimestamp;
            if (actionOptions.addTimestamp && typeof actionOptions.addTimestamp !== 'string') {
                actionOptions.addTimestamp = 'ts';
            }
        }
    };
    Resource.prototype.$_setResolvedOptions = function (options) {
        return Promise.all([
            this.$getUrl(options.actionOptions),
            this.$getPathPrefix(options.actionOptions),
            this.$getPath(options.actionOptions),
            this.$getHeaders(options.actionOptions),
            this.$getBody(options.actionOptions),
            this.$getParams(options.actionOptions),
            this.$getQuery(options.actionOptions)
        ])
            .then(function (resolvedMain) {
            options.resolvedOptions = {};
            var r = options.resolvedOptions;
            r.url = resolvedMain[0], r.pathPrefix = resolvedMain[1], r.path = resolvedMain[2], r.headers = resolvedMain[3], r.body = resolvedMain[4], r.params = resolvedMain[5], r.query = resolvedMain[6];
            return options;
        });
    };
    Resource.prototype.$_createRequestOptions = function (options) {
        options.requestOptions = {};
        // Step 1 set main
        options.requestOptions.method = options.actionOptions.method;
        options.requestOptions.headers = options.resolvedOptions.headers;
        options.requestOptions.withCredentials = options.actionOptions.withCredentials;
        options.requestOptions.responseBodyType = options.actionOptions.responseBodyType;
        options.requestOptions.requestBodyType = options.actionOptions.requestBodyType;
        // Step 2 create url
        this.$setRequestOptionsUrl(options);
        // Step 3 create body
        this.$setRequestOptionsBody(options);
        // Step 4 set query params
        this.$setRequestOptionsQuery(options);
        return options;
    };
    Resource.prototype.$_canSetInternalData = function (options) {
        return options.returnData && (!options.actionOptions.lean || options.isModel);
    };
    return Resource;
}());



/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceGlobalConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Declarations__ = __webpack_require__(0);

var ResourceGlobalConfig = /** @class */ (function () {
    function ResourceGlobalConfig() {
    }
    ResourceGlobalConfig.url = null;
    ResourceGlobalConfig.pathPrefix = null;
    ResourceGlobalConfig.path = null;
    ResourceGlobalConfig.headers = null;
    ResourceGlobalConfig.body = null;
    ResourceGlobalConfig.params = null;
    ResourceGlobalConfig.query = null;
    ResourceGlobalConfig.removeTrailingSlash = true;
    ResourceGlobalConfig.addTimestamp = false;
    ResourceGlobalConfig.withCredentials = false;
    ResourceGlobalConfig.lean = null;
    ResourceGlobalConfig.asPromise = true;
    // static toObservable: boolean = null;
    ResourceGlobalConfig.asResourceResponse = false;
    ResourceGlobalConfig.responseBodyType = __WEBPACK_IMPORTED_MODULE_0__Declarations__["d" /* ResourceResponseBodyType */].Json;
    ResourceGlobalConfig.queryMappingMethod = __WEBPACK_IMPORTED_MODULE_0__Declarations__["a" /* ResourceQueryMappingMethod */].Plain;
    return ResourceGlobalConfig;
}());



/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = ResourceAction;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Declarations__ = __webpack_require__(0);
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};

function ResourceAction(methodOptions) {
    methodOptions = methodOptions || {};
    if (methodOptions.method === undefined) {
        methodOptions.method = __WEBPACK_IMPORTED_MODULE_0__Declarations__["c" /* ResourceRequestMethod */].Get;
    }
    return function (target, propertyKey) {
        target[propertyKey] = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var callbacks = args.filter(function (arg) { return typeof arg === 'function'; });
            var data = args.filter(function (arg) { return typeof arg !== 'function'; });
            var body = data[0];
            var query = data[1];
            var params = data[2];
            var onSuccess = callbacks[0];
            var onError = callbacks[1];
            //tslint:disable-next-line:no-invalid-this
            var actionOptions = __assign({}, this.getResourceOptions(), methodOptions);
            //tslint:disable-next-line:no-invalid-this
            return this.$restAction({ actionAttributes: { body: body, query: query, params: params, onSuccess: onSuccess, onError: onError }, actionOptions: actionOptions });
        };
    };
}


/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_Declarations__ = __webpack_require__(0);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceRequestBodyType", function() { return __WEBPACK_IMPORTED_MODULE_0__src_Declarations__["b"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceResponseBodyType", function() { return __WEBPACK_IMPORTED_MODULE_0__src_Declarations__["d"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceRequestMethod", function() { return __WEBPACK_IMPORTED_MODULE_0__src_Declarations__["c"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceQueryMappingMethod", function() { return __WEBPACK_IMPORTED_MODULE_0__src_Declarations__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Resource__ = __webpack_require__(2);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "Resource", function() { return __WEBPACK_IMPORTED_MODULE_1__src_Resource__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_ResourceAction__ = __webpack_require__(4);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceAction", function() { return __WEBPACK_IMPORTED_MODULE_2__src_ResourceAction__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_ResourceGlobalConfig__ = __webpack_require__(3);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceGlobalConfig", function() { return __WEBPACK_IMPORTED_MODULE_3__src_ResourceGlobalConfig__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_ResourceHandler__ = __webpack_require__(6);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceHandler", function() { return __WEBPACK_IMPORTED_MODULE_4__src_ResourceHandler__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_ResourceHelper__ = __webpack_require__(1);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceHelper", function() { return __WEBPACK_IMPORTED_MODULE_5__src_ResourceHelper__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_ResourceModel__ = __webpack_require__(7);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceModel", function() { return __WEBPACK_IMPORTED_MODULE_6__src_ResourceModel__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_ResourceParams__ = __webpack_require__(8);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceParams", function() { return __WEBPACK_IMPORTED_MODULE_7__src_ResourceParams__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_ResourceCommon_ResourceCRUD__ = __webpack_require__(9);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceCRUD", function() { return __WEBPACK_IMPORTED_MODULE_8__src_ResourceCommon_ResourceCRUD__["a"]; });











/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceHandler; });
var ResourceHandler = /** @class */ (function () {
    function ResourceHandler() {
    }
    return ResourceHandler;
}());



/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceModel; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ResourceHelper__ = __webpack_require__(1);

var ResourceModel = /** @class */ (function () {
    function ResourceModel() {
        this.$resource = null;
        this.$resolved = true;
        this.$promise = null;
    }
    ResourceModel.get = function (id) {
        return this.getInstance()[this.methodGet]({ id: id });
    };
    ResourceModel.query = function (query) {
        return this.getInstance()[this.methodQuery](query);
    };
    ResourceModel.remove = function (id) {
        return this.getInstance()[this.methodRemove]({ id: id });
    };
    ResourceModel.getInstance = function () {
        if (!this.resourceInstance) {
            var model = (new this());
            if (!model.$resource) {
                throw new Error('Your resource is not defined');
            }
            if (!model.$resource.instance) {
                throw new Error('Your resource is not created (inject it somewhere)');
            }
            this.resourceInstance = (new this()).$resource.instance;
        }
        return this.resourceInstance;
    };
    ResourceModel.prototype.$setData = function (data) {
        Object.assign(this, data);
        return this;
    };
    ResourceModel.prototype.$save = function (query, params) {
        if (this.isNew()) {
            return this.$create(query, params);
        }
        else {
            return this.$update(query, params);
        }
    };
    ResourceModel.prototype.$create = function (query, params) {
        return this.$executeResourceMethod(this.constructor.methodCreate, query, params);
    };
    ResourceModel.prototype.$update = function (query, params) {
        return this.$executeResourceMethod(this.constructor.methodUpdate, query, params);
    };
    ResourceModel.prototype.$remove = function (query, params) {
        return this.$executeResourceMethod(this.constructor.methodRemove, query, params);
    };
    ResourceModel.prototype.toJSON = function () {
        return __WEBPACK_IMPORTED_MODULE_0__ResourceHelper__["a" /* ResourceHelper */].cleanData(this);
    };
    ResourceModel.prototype.isNew = function () {
        return !this['id'];
    };
    ResourceModel.prototype.$getResourceWithMethodCheck = function (methodName) {
        if (!this.$resource) {
            console.error("Your Resource is not defined");
            return null;
        }
        var restInstance = this.$resource.instance;
        if (!restInstance) {
            console.error("Your Resource is not defined or not created");
            return null;
        }
        if (!restInstance[methodName]) {
            console.error("Your Resource has no implemented " + methodName + " method.");
            return null;
        }
        return restInstance;
    };
    ResourceModel.prototype.$executeResourceMethod = function (methodName, query, params) {
        var resource = this.$getResourceWithMethodCheck(methodName);
        if (resource) {
            resource[methodName](this, query, params);
        }
        return this;
    };
    ResourceModel.resourceInstance = null;
    ResourceModel.methodQuery = 'query';
    ResourceModel.methodGet = 'get';
    ResourceModel.methodCreate = 'create';
    ResourceModel.methodUpdate = 'update';
    ResourceModel.methodRemove = 'remove';
    return ResourceModel;
}());



/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = ResourceParams;
function ResourceParams(params) {
    if (params === void 0) { params = {}; }
    return function (target) {
        target.prototype.getResourceOptions = function () {
            return params;
        };
    };
}


/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceCRUD; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Resource__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ResourceAction__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Declarations__ = __webpack_require__(0);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ResourceCRUD = /** @class */ (function (_super) {
    __extends(ResourceCRUD, _super);
    function ResourceCRUD() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // Alias to save
    ResourceCRUD.prototype.create = function (data, callback) {
        return this.save(data, callback);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])(),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "query", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])({
            path: '/{!id}'
        }),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "get", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])({
            method: __WEBPACK_IMPORTED_MODULE_2__Declarations__["c" /* ResourceRequestMethod */].Post
        }),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "save", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])({
            method: __WEBPACK_IMPORTED_MODULE_2__Declarations__["c" /* ResourceRequestMethod */].Put,
            path: '/{!id}'
        }),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "update", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])({
            method: __WEBPACK_IMPORTED_MODULE_2__Declarations__["c" /* ResourceRequestMethod */].Delete,
            path: '/{!:id}'
        }),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "remove", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__ResourceAction__["a" /* ResourceAction */])({
            method: __WEBPACK_IMPORTED_MODULE_2__Declarations__["c" /* ResourceRequestMethod */].Patch,
            path: '/{!id}'
        }),
        __metadata("design:type", Function)
    ], ResourceCRUD.prototype, "patch", void 0);
    return ResourceCRUD;
}(__WEBPACK_IMPORTED_MODULE_0__Resource__["a" /* Resource */]));



/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3OGQ3NzgxMTRhNmIzMzkyOWZkYSIsIndlYnBhY2s6Ly8vLi9zcmMvRGVjbGFyYXRpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9SZXNvdXJjZUhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUmVzb3VyY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Jlc291cmNlR2xvYmFsQ29uZmlnLnRzIiwid2VicGFjazovLy8uL3NyYy9SZXNvdXJjZUFjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUmVzb3VyY2VIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9SZXNvdXJjZU1vZGVsLnRzIiwid2VicGFjazovLy8uL3NyYy9SZXNvdXJjZVBhcmFtcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUmVzb3VyY2VDb21tb24vUmVzb3VyY2VDUlVELnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7OztB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QUMwRDtJQU85RCxtQkFBQztDQUFBLENBdEMwRiwyREFBUSxHQXNDbEc7QUF0Q2lDIiwiZmlsZSI6ImNvcmUudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibmd4LXJlc291cmNlLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibmd4LXJlc291cmNlLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA3OGQ3NzgxMTRhNmIzMzkyOWZkYSIsImV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlUGFyYW1zQmFzZSB7XG4gIHVybD86IHN0cmluZztcbiAgcGF0aFByZWZpeD86IHN0cmluZztcbiAgcGF0aD86IHN0cmluZztcbiAgaGVhZGVycz86IGFueTtcbiAgYm9keT86IGFueTtcbiAgcGFyYW1zPzogYW55O1xuICBxdWVyeT86IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VQYXJhbXMgZXh0ZW5kcyBJUmVzb3VyY2VQYXJhbXNCYXNlIHtcbiAgcm9vdE5vZGU/OiBzdHJpbmc7XG4gIHJlbW92ZVRyYWlsaW5nU2xhc2g/OiBib29sZWFuO1xuICBhZGRUaW1lc3RhbXA/OiBib29sZWFuIHwgc3RyaW5nO1xuICB3aXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICBsZWFuPzogYm9vbGVhbjtcbiAgbXV0YXRlQm9keT86IGJvb2xlYW47XG4gIGFzUHJvbWlzZT86IGJvb2xlYW47XG4gIGtlZXBFbXB0eUJvZHk/OiBib29sZWFuO1xuICByZXF1ZXN0Qm9keVR5cGU/OiBSZXNvdXJjZVJlcXVlc3RCb2R5VHlwZTtcbiAgcmVzcG9uc2VCb2R5VHlwZT86IFJlc291cmNlUmVzcG9uc2VCb2R5VHlwZTtcbiAgcXVlcnlNYXBwaW5nTWV0aG9kPzogUmVzb3VyY2VRdWVyeU1hcHBpbmdNZXRob2Q7XG4gIGFzUmVzb3VyY2VSZXNwb25zZT86IGJvb2xlYW47XG5cbiAgW3Byb3A6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VBY3Rpb24gZXh0ZW5kcyBJUmVzb3VyY2VQYXJhbXMge1xuICBtZXRob2Q/OiBSZXNvdXJjZVJlcXVlc3RNZXRob2Q7IC8vIGdldCBkZWZhdWx0XG4gIGV4cGVjdEpzb25BcnJheT86IGJvb2xlYW47XG4gIHJlc3VsdEZhY3Rvcnk/OiBJUmVzb3VyY2VSZXN1bHRGYWN0b3J5O1xuICBtYXA/OiBJUmVzb3VyY2VSZXNwb25zZU1hcDtcbiAgZmlsdGVyPzogSVJlc291cmNlUmVzcG9uc2VGaWx0ZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlUmVzcG9uc2VNYXAge1xuICAoaXRlbTogYW55LCBvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VSZXNwb25zZUZpbHRlciB7XG4gIChpdGVtOiBhbnksIG9wdGlvbnM6IElSZXNvdXJjZUFjdGlvbklubmVyKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VSZXN1bHRGYWN0b3J5IHtcbiAgKGl0ZW06IGFueSwgb3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIpOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlQWN0aW9uQXR0cmlidXRlcyB7XG4gIGJvZHk6IGFueTtcbiAgcXVlcnk6IGFueTtcbiAgcGFyYW1zOiBhbnk7XG5cbiAgb25TdWNjZXNzKGRhdGE6IGFueSk6IGFueTtcblxuICBvbkVycm9yKGRhdGE6IGFueSk6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VBY3Rpb25Jbm5lciB7XG4gIGFjdGlvbkF0dHJpYnV0ZXM/OiBJUmVzb3VyY2VBY3Rpb25BdHRyaWJ1dGVzO1xuICBhY3Rpb25PcHRpb25zPzogSVJlc291cmNlQWN0aW9uO1xuICByZXNvbHZlZE9wdGlvbnM/OiBJUmVzb3VyY2VQYXJhbXNCYXNlO1xuXG4gIHF1ZXJ5TWFwcGluZ01ldGhvZD86IFJlc291cmNlUXVlcnlNYXBwaW5nTWV0aG9kO1xuXG4gIHVzZWRJblBhdGg/OiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgbWFpblByb21pc2U/OiBQcm9taXNlPGFueT47XG4gIGlzTW9kZWw/OiBib29sZWFuO1xuXG4gIHJlcXVlc3RPcHRpb25zPzogSVJlc291cmNlUmVxdWVzdDtcblxuICByZXR1cm5EYXRhPzogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNvdXJjZVJlcXVlc3Qge1xuICBtZXRob2Q/OiBSZXNvdXJjZVJlcXVlc3RNZXRob2Q7XG4gIGhlYWRlcnM/OiBhbnk7XG4gIHVybD86IHN0cmluZztcbiAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgYm9keT86IGFueTtcbiAgcXVlcnk/OiB7IFtwcm9wOiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgcmVzcG9uc2VCb2R5VHlwZT86IFJlc291cmNlUmVzcG9uc2VCb2R5VHlwZTtcbiAgcmVxdWVzdEJvZHlUeXBlPzogUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlSGFuZGxlclJlc3BvbnNlIHtcbiAgcHJvbWlzZTogUHJvbWlzZTxJUmVzb3VyY2VSZXNwb25zZT47XG5cbiAgYWJvcnQ/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlUmVzcG9uc2U8QiA9IGFueT4ge1xuICBzdGF0dXM6IG51bWJlcjtcbiAgaGVhZGVycz86IGFueTtcbiAgYm9keT86IEI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTWV0aG9kU3RyaWN0QmFzZTxJQiwgSVEsIElQLCBPLCBSPiB7XG4gIChib2R5OiBJQixcbiAgIHF1ZXJ5OiBJUSxcbiAgIHBhcmFtczogSVAsXG4gICBvblN1Y2Nlc3M/OiAoZGF0YTogTykgPT4gYW55LFxuICAgb25FcnJvcj86IChlcnI6IElSZXNvdXJjZVJlc3BvbnNlKSA9PiBhbnkpOiBSO1xuXG4gIChib2R5OiBJQixcbiAgIHF1ZXJ5OiBJUSxcbiAgIG9uU3VjY2Vzcz86IChkYXRhOiBPKSA9PiBhbnksXG4gICBvbkVycm9yPzogKGVycjogSVJlc291cmNlUmVzcG9uc2UpID0+IGFueSk6IFI7XG5cbiAgKGJvZHk6IElCLFxuICAgb25TdWNjZXNzPzogKGRhdGE6IE8pID0+IGFueSxcbiAgIG9uRXJyb3I/OiAoZXJyOiBJUmVzb3VyY2VSZXNwb25zZSkgPT4gYW55KTogUjtcblxuICAob25TdWNjZXNzPzogKGRhdGE6IE8pID0+IGFueSxcbiAgIG9uRXJyb3I/OiAoZXJyOiBJUmVzb3VyY2VSZXNwb25zZSkgPT4gYW55KTogUjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VNZXRob2RCYXNlPElCLCBPLCBSPlxuICBleHRlbmRzIElSZXNvdXJjZU1ldGhvZFN0cmljdEJhc2U8SUIsIGFueSwgYW55LCBPLCBSPiB7XG59XG5cblxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNvdXJjZU1ldGhvZFN0cmljdDxJQiwgSVEsIElQLCBPPlxuICBleHRlbmRzIElSZXNvdXJjZU1ldGhvZFN0cmljdEJhc2U8SUIsIElRLCBJUCwgTywgUHJvbWlzZTxPPj4ge1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNvdXJjZU1ldGhvZDxJQiwgTz5cbiAgZXh0ZW5kcyBJUmVzb3VyY2VNZXRob2RCYXNlPElCLCBPLCBQcm9taXNlPE8+PiB7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBJUmVzb3VyY2VNZXRob2RSZXN1bHRTdHJpY3Q8SUIsIElRLCBJUCwgTz5cbiAgZXh0ZW5kcyBJUmVzb3VyY2VNZXRob2RTdHJpY3RCYXNlPElCLCBJUSwgSVAsIE8sIFJlc291cmNlUmVzdWx0PE8+PiB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTWV0aG9kUmVzdWx0PElCLCBPPlxuICBleHRlbmRzIElSZXNvdXJjZU1ldGhvZEJhc2U8SUIsIE8sIFJlc291cmNlUmVzdWx0PE8+PiB7XG59XG5cblxuXG4vLyBBcyBJUmVzb3VyY2VSZXNwb25zZVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNvdXJjZU1ldGhvZFN0cmljdEZ1bGw8SUIsIElRLCBJUCwgTz5cbiAgZXh0ZW5kcyBJUmVzb3VyY2VNZXRob2RTdHJpY3RCYXNlPElCLCBJUSwgSVAsIE8sIFByb21pc2U8SVJlc291cmNlUmVzcG9uc2U8Tz4+PiB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTWV0aG9kRnVsbDxJQiwgTz5cbiAgZXh0ZW5kcyBJUmVzb3VyY2VNZXRob2RCYXNlPElCLCBPLCBQcm9taXNlPElSZXNvdXJjZVJlc3BvbnNlPE8+Pj4ge1xufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTWV0aG9kUmVzdWx0U3RyaWN0RnVsbDxJQiwgSVEsIElQLCBPPlxuICBleHRlbmRzIElSZXNvdXJjZU1ldGhvZFN0cmljdEJhc2U8SUIsIElRLCBJUCwgTywgUmVzb3VyY2VSZXN1bHQ8SVJlc291cmNlUmVzcG9uc2U8Tz4+PiB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTWV0aG9kUmVzdWx0RnVsbDxJQiwgTz5cbiAgZXh0ZW5kcyBJUmVzb3VyY2VNZXRob2RCYXNlPElCLCBPLCBSZXNvdXJjZVJlc3VsdDxJUmVzb3VyY2VSZXNwb25zZTxPPj4+IHtcbn1cblxuXG5cbmV4cG9ydCB0eXBlIFJlc291cmNlUmVzdWx0PFIgZXh0ZW5kcyB7fT4gPSBSICYge1xuICAkcmVzb2x2ZWQ/OiBib29sZWFuO1xuICAkcHJvbWlzZT86IFByb21pc2U8Uj47XG4gICRhYm9ydD8oKTogdm9pZDtcbn07XG5cblxuZXhwb3J0IGVudW0gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUge1xuICBOT05FID0gMCxcbiAgSlNPTiA9IDEsXG4gIEZPUk0gPSAyLFxuICBGT1JNX0RBVEEgPSAzLFxuICBURVhUID0gNCxcbiAgQkxPQiA9IDUsXG4gIEFSUkFZX0JVRkZFUiA9IDZcbn1cblxuZXhwb3J0IGVudW0gUmVzb3VyY2VSZXNwb25zZUJvZHlUeXBlIHtcbiAgVGV4dCA9IDEsXG4gIEpzb24gPSAyLFxuICBBcnJheUJ1ZmZlciA9IDMsXG4gIEJsb2IgPSA0XG59XG5cbmV4cG9ydCBlbnVtIFJlc291cmNlUmVxdWVzdE1ldGhvZCB7XG4gIEdldCA9IDEsXG4gIFBvc3QgPSAyLFxuICBQdXQgPSAzLFxuICBEZWxldGUgPSA0LFxuICBPcHRpb25zID0gNSxcbiAgSGVhZCA9IDYsXG4gIFBhdGNoID0gN1xufVxuXG5leHBvcnQgZW51bSBSZXNvdXJjZVF1ZXJ5TWFwcGluZ01ldGhvZCB7XG4gIFBsYWluID0gMSxcbiAgQnJhY2tldCA9IDIsXG4gIEpRdWVyeVBhcmFtc0JyYWNrZXQgPSAzLFxuXG4gIE5vbmUgPSA5OVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0RlY2xhcmF0aW9ucy50cyIsImltcG9ydCB7IFJlc291cmNlUmVxdWVzdEJvZHlUeXBlIH0gZnJvbSAnLi9EZWNsYXJhdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VIZWxwZXIge1xuXG4gIHN0YXRpYyBjbGVhbkRhdGFGaWVsZHM6IHN0cmluZ1tdID0gW1xuICAgICckcmVzb2x2ZWQnLFxuICAgICckcHJvbWlzZScsXG4gICAgJyRhYm9ydCcsXG4gICAgJyRyZXNvdXJjZSdcbiAgXTtcblxuXG5cbiAgcHJpdmF0ZSBzdGF0aWMgaXNCcm93c2VyOiBib29sZWFuID0gbnVsbDtcblxuICBzdGF0aWMgaXNSdW5uaW5nSW5Ccm93c2VyKCk6IGJvb2xlYW4ge1xuXG4gICAgaWYgKHRoaXMuaXNCcm93c2VyICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0Jyb3dzZXI7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaXNCcm93c2VyID0gISF3aW5kb3c7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5pc0Jyb3dzZXIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pc0Jyb3dzZXI7XG4gIH1cblxuICBzdGF0aWMgZ2V0UmVhbFR5cGVPZihkYXRhOiBhbnkpOiBSZXNvdXJjZVJlcXVlc3RCb2R5VHlwZSB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuTk9ORTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgaWYgKEZvcm1EYXRhICYmIGRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuICAgICAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuRk9STV9EQVRBO1xuICAgICAgfVxuXG4gICAgICBpZiAoQmxvYiAmJiBkYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuQkxPQjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuQVJSQVlfQlVGRkVSO1xuICAgIH1cblxuICAgIGlmIChbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBkYXRhKSA+IC0xKSB7XG4gICAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuVEVYVDtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuSlNPTjtcbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0cyhkc3Q6IGFueSwgc3JjOiBhbnkpOiBhbnkge1xuXG4gICAgaWYgKCFkc3QpIHtcbiAgICAgIGRzdCA9IHt9O1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzKHNyYylcbiAgICAgIC5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoZHN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIGRzdDtcblxuICB9XG5cbiAgc3RhdGljIGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHN0YXRpYyBjbGVhbkRhdGEob2JqOiBhbnkpOiBhbnkge1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xlYW5EYXRhQXJyYXkob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2xlYW5EYXRhT2JqZWN0KG9iaik7XG4gICAgfVxuXG4gIH1cblxuICBzdGF0aWMgY2xlYW5EYXRhQXJyYXkob2JqOiBhbnlbXSk6IGFueVtdIHtcbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9iaikge1xuXG4gICAgICBpZiAodHlwZW9mIG9ialtwcm9wTmFtZV0gPT09ICdmdW5jdGlvbicgfHwgdGhpcy5jbGVhbkRhdGFGaWVsZHMuaW5kZXhPZihwcm9wTmFtZSkgPiAtMSkge1xuICAgICAgICBkZWxldGUgb2JqW3Byb3BOYW1lXTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBzdGF0aWMgY2xlYW5EYXRhT2JqZWN0KG9iajogYW55KTogYW55IHtcbiAgICBjb25zdCBjbGVhbmVkT2JqOiBhbnkgPSB7fTtcblxuICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XG5cbiAgICAgIGlmICh0eXBlb2Ygb2JqW3Byb3BOYW1lXSAhPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLmNsZWFuRGF0YUZpZWxkcy5pbmRleE9mKHByb3BOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgY2xlYW5lZE9ialtwcm9wTmFtZV0gPSBvYmpbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuZWRPYmo7XG4gIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc291cmNlSGVscGVyLnRzIiwiaW1wb3J0IHtcbiAgSVJlc291cmNlQWN0aW9uLFxuICBJUmVzb3VyY2VBY3Rpb25Jbm5lcixcbiAgSVJlc291cmNlUmVzcG9uc2UsXG4gIFJlc291cmNlUXVlcnlNYXBwaW5nTWV0aG9kLFxuICBSZXNvdXJjZVJlcXVlc3RCb2R5VHlwZSxcbiAgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kXG59IGZyb20gJy4vRGVjbGFyYXRpb25zJztcbmltcG9ydCB7IFJlc291cmNlR2xvYmFsQ29uZmlnIH0gZnJvbSAnLi9SZXNvdXJjZUdsb2JhbENvbmZpZyc7XG5pbXBvcnQgeyBSZXNvdXJjZUhlbHBlciB9IGZyb20gJy4vUmVzb3VyY2VIZWxwZXInO1xuaW1wb3J0IHsgUmVzb3VyY2VIYW5kbGVyIH0gZnJvbSAnLi9SZXNvdXJjZUhhbmRsZXInO1xuXG5leHBvcnQgY2xhc3MgUmVzb3VyY2Uge1xuXG4gIHByaXZhdGUgJHVybDogc3RyaW5nID0gbnVsbDtcbiAgcHJpdmF0ZSAkcGF0aFByZWZpeDogc3RyaW5nID0gbnVsbDtcbiAgcHJpdmF0ZSAkcGF0aDogc3RyaW5nID0gbnVsbDtcbiAgcHJpdmF0ZSAkaGVhZGVyczogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSAkYm9keTogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSAkcGFyYW1zOiBhbnkgPSBudWxsO1xuICBwcml2YXRlICRxdWVyeTogYW55ID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcmVxdWVzdEhhbmRsZXI6IFJlc291cmNlSGFuZGxlcikge1xuICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIGFueSkuaW5zdGFuY2UgPSB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZ2V0IHVybFxuICAgKlxuICAgKiBAcGFyYW0ge0lSZXNvdXJjZUFjdGlvbn0gYWN0aW9uT3B0aW9uc1xuICAgKiBAcmV0dXJuIHtzdHJpbmcgfCBQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICAkZ2V0VXJsKGFjdGlvbk9wdGlvbnM6IElSZXNvdXJjZUFjdGlvbiA9IHt9KTogc3RyaW5nIHwgUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy4kdXJsIHx8IGFjdGlvbk9wdGlvbnMudXJsIHx8IFJlc291cmNlR2xvYmFsQ29uZmlnLnVybCB8fCAnJztcbiAgfVxuXG4gICRzZXRVcmwodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLiR1cmwgPSB1cmw7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBnZXQgcGF0aCBwcmVmaXhcbiAgICpcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VBY3Rpb259IGFjdGlvbk9wdGlvbnNcbiAgICogQHJldHVybiB7c3RyaW5nIHwgUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgJGdldFBhdGhQcmVmaXgoYWN0aW9uT3B0aW9uczogSVJlc291cmNlQWN0aW9uID0ge30pOiBzdHJpbmcgfCBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLiRwYXRoUHJlZml4IHx8IGFjdGlvbk9wdGlvbnMucGF0aFByZWZpeCB8fCBSZXNvdXJjZUdsb2JhbENvbmZpZy5wYXRoUHJlZml4IHx8ICcnO1xuICB9XG5cbiAgJHNldFBhdGhQcmVmaXgocGF0aDogc3RyaW5nKSB7XG4gICAgdGhpcy4kcGF0aFByZWZpeCA9IHBhdGg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBnZXQgcGF0aFxuICAgKlxuICAgKiBAcGFyYW0ge0lSZXNvdXJjZUFjdGlvbn0gYWN0aW9uT3B0aW9uc1xuICAgKiBAcmV0dXJuIHtzdHJpbmcgfCBQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICAkZ2V0UGF0aChhY3Rpb25PcHRpb25zOiBJUmVzb3VyY2VBY3Rpb24gPSB7fSk6IHN0cmluZyB8IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuJHBhdGggfHwgYWN0aW9uT3B0aW9ucy5wYXRoIHx8IFJlc291cmNlR2xvYmFsQ29uZmlnLnBhdGggfHwgJyc7XG4gIH1cblxuICAkc2V0UGF0aChwYXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLiRwYXRoID0gcGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaGVhZGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VBY3Rpb259IGFjdGlvbk9wdGlvbnNcbiAgICogQHJldHVybiB7YW55IHwgUHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgJGdldEhlYWRlcnMoYWN0aW9uT3B0aW9uczogSVJlc291cmNlQWN0aW9uID0ge30pOiBhbnkgfCBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLiRoZWFkZXJzIHx8IGFjdGlvbk9wdGlvbnMuaGVhZGVycyB8fCBSZXNvdXJjZUdsb2JhbENvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICB9XG5cbiAgJHNldEhlYWRlcnMoaGVhZGVyczogYW55KSB7XG4gICAgdGhpcy4kaGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJvZHlcbiAgICpcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VBY3Rpb259IGFjdGlvbk9wdGlvbnNcbiAgICogQHJldHVybiB7YW55IHwgUHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgJGdldEJvZHkoYWN0aW9uT3B0aW9uczogSVJlc291cmNlQWN0aW9uID0ge30pOiBhbnkgfCBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLiRib2R5IHx8IGFjdGlvbk9wdGlvbnMuYm9keSB8fCBSZXNvdXJjZUdsb2JhbENvbmZpZy5ib2R5IHx8IHt9O1xuICB9XG5cbiAgJHNldEJvZHkoYm9keTogYW55KSB7XG4gICAgdGhpcy4kYm9keSA9IGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhdGggcGFyYW1zXG4gICAqXG4gICAqIEBwYXJhbSB7SVJlc291cmNlQWN0aW9ufSBhY3Rpb25PcHRpb25zXG4gICAqIEByZXR1cm4ge2FueSB8IFByb21pc2U8YW55Pn1cbiAgICovXG4gICRnZXRQYXJhbXMoYWN0aW9uT3B0aW9uczogSVJlc291cmNlQWN0aW9uID0ge30pOiBhbnkgfCBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLiRwYXJhbXMgfHwgYWN0aW9uT3B0aW9ucy5wYXJhbXMgfHwgUmVzb3VyY2VHbG9iYWxDb25maWcucGFyYW1zIHx8IHt9O1xuICB9XG5cbiAgJHNldFBhcmFtcyhwYXJhbXM6IGFueSkge1xuICAgIHRoaXMuJHBhcmFtcyA9IHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcXVlcnkgcGFyYW1zXG4gICAqXG4gICAqIEBwYXJhbSB7SVJlc291cmNlQWN0aW9ufSBhY3Rpb25PcHRpb25zXG4gICAqIEByZXR1cm4ge2FueSB8IFByb21pc2U8YW55Pn1cbiAgICovXG4gICRnZXRRdWVyeShhY3Rpb25PcHRpb25zOiBJUmVzb3VyY2VBY3Rpb24gPSB7fSk6IGFueSB8IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuJHF1ZXJ5IHx8IGFjdGlvbk9wdGlvbnMucXVlcnkgfHwgUmVzb3VyY2VHbG9iYWxDb25maWcucXVlcnkgfHwge307XG4gIH1cblxuICAkc2V0UXVlcnkocXVlcnk6IGFueSkge1xuICAgIHRoaXMuJHF1ZXJ5ID0gcXVlcnk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBmaWx0ZXIgcmVjZWl2ZWQgZGF0YS5cbiAgICogSXMgYXBwbGllZCBvbiBlYWNoIGVsZW1lbnQgb2YgYXJyYXkgb3Igb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEBwYXJhbSB7SVJlc291cmNlQWN0aW9uSW5uZXJ9IG9wdGlvbnNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gICRmaWx0ZXIoZGF0YTogYW55LCBvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lciA9IHt9KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBtYXAgcmVjZWl2ZWQgZGF0YVxuICAgKiBJcyBhcHBsaWVkIG9uIGVhY2ggZWxlbWVudCBvZiBhcnJheSBvciBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VBY3Rpb25Jbm5lcn0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHthbnl9XG4gICAqL1xuICAkbWFwKGRhdGE6IGFueSwgb3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIgPSB7fSk6IGFueSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBjcmVhdGUgcmVzdWx0IG9iamVjdFxuICAgKiBJcyBhcHBsaWVkIG9uIGVhY2ggZWxlbWVudCBvZiBhcnJheSBvciBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VBY3Rpb25Jbm5lcn0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHthbnl9XG4gICAqL1xuICAkcmVzdWx0RmFjdG9yeShkYXRhOiBhbnksIG9wdGlvbnM6IElSZXNvdXJjZUFjdGlvbklubmVyID0ge30pOiBhbnkge1xuICAgIHJldHVybiBkYXRhIHx8IHt9O1xuICB9XG5cbiAgJHJlc3RBY3Rpb24ob3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIpIHtcblxuICAgIHRoaXMuJF9zZXRSZXNvdXJjZUFjdGlvbklubmVyRGVmYXVsdHMob3B0aW9ucyk7XG4gICAgdGhpcy4kX3NldFJlc291cmNlQWN0aW9uT3B0aW9uRGVmYXVsdHMob3B0aW9ucyk7XG5cbiAgICBjb25zdCBhY3Rpb25PcHRpb25zID0gb3B0aW9ucy5hY3Rpb25PcHRpb25zO1xuXG4gICAgaWYgKGFjdGlvbk9wdGlvbnMubXV0YXRlQm9keSB8fCBvcHRpb25zLmlzTW9kZWwpIHtcbiAgICAgIG9wdGlvbnMucmV0dXJuRGF0YSA9IG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5ib2R5O1xuICAgIH1cblxuICAgIGlmICghYWN0aW9uT3B0aW9ucy5hc1Byb21pc2UpIHtcbiAgICAgIG9wdGlvbnMucmV0dXJuRGF0YSA9IGFjdGlvbk9wdGlvbnMuZXhwZWN0SnNvbkFycmF5ID8gW10gOiBhY3Rpb25PcHRpb25zLnJlc3VsdEZhY3RvcnkuY2FsbCh0aGlzLCBudWxsLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4kX2NhblNldEludGVybmFsRGF0YShvcHRpb25zKSkge1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3B0aW9ucy5yZXR1cm5EYXRhLCAnJHJlc29sdmVkJywge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdGlvbnMucmV0dXJuRGF0YSwgJyRhYm9ydCcsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAoKSA9PiB7XG4gICAgICAgICAgLy8gZG9lcyBub3RoaW5nIGZvciBub3dcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBvcHRpb25zLm1haW5Qcm9taXNlID0gdGhpcy4kX3NldFJlc29sdmVkT3B0aW9ucyhvcHRpb25zKVxuICAgICAgLnRoZW4oKG86IElSZXNvdXJjZUFjdGlvbklubmVyKSA9PiB0aGlzLiRfY3JlYXRlUmVxdWVzdE9wdGlvbnMobykpXG4gICAgICAudGhlbigobzogSVJlc291cmNlQWN0aW9uSW5uZXIpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlclJlc3AgPSB0aGlzLnJlcXVlc3RIYW5kbGVyLmhhbmRsZShvLnJlcXVlc3RPcHRpb25zKTtcblxuICAgICAgICBpZiAoby5yZXR1cm5EYXRhICYmIHRoaXMuJF9jYW5TZXRJbnRlcm5hbERhdGEob3B0aW9ucykpIHtcbiAgICAgICAgICBvLnJldHVybkRhdGEuJGFib3J0ID0gaGFuZGxlclJlc3AuYWJvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGFuZGxlclJlc3AucHJvbWlzZTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzcDogSVJlc291cmNlUmVzcG9uc2UpID0+IHRoaXMuJGhhbmRsZVN1Y2Nlc3NSZXNwb25zZShvcHRpb25zLCByZXNwKSlcbiAgICAgIC5jYXRjaCgocmVzcDogSVJlc291cmNlUmVzcG9uc2UpID0+IHRoaXMuJGhhbmRsZUVycm9yUmVzcG9uc2Uob3B0aW9ucywgcmVzcCkpO1xuXG5cbiAgICBpZiAodGhpcy4kX2NhblNldEludGVybmFsRGF0YShvcHRpb25zKSkge1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3B0aW9ucy5yZXR1cm5EYXRhLCAnJHByb21pc2UnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogb3B0aW9ucy5tYWluUHJvbWlzZVxuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uT3B0aW9ucy5hc1Byb21pc2UgPyBvcHRpb25zLm1haW5Qcm9taXNlIDogb3B0aW9ucy5yZXR1cm5EYXRhO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgJGhhbmRsZVN1Y2Nlc3NSZXNwb25zZShvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lciwgcmVzcDogSVJlc291cmNlUmVzcG9uc2UpOiBhbnkge1xuXG4gICAgbGV0IGJvZHkgPSByZXNwLmJvZHk7XG5cbiAgICBjb25zdCBhY3Rpb25PcHRpb25zID0gb3B0aW9ucy5hY3Rpb25PcHRpb25zO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYm9keSkpIHtcblxuICAgICAgYm9keSA9IGJvZHlcbiAgICAgICAgLmZpbHRlcigoaXRlbTogYW55KSA9PiBhY3Rpb25PcHRpb25zLmZpbHRlci5jYWxsKHRoaXMsIGl0ZW0sIG9wdGlvbnMpKVxuICAgICAgICAubWFwKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICBpdGVtID0gYWN0aW9uT3B0aW9ucy5tYXAuY2FsbCh0aGlzLCBpdGVtLCBvcHRpb25zKTtcblxuICAgICAgICAgIHJldHVybiBhY3Rpb25PcHRpb25zLnJlc3VsdEZhY3RvcnkuY2FsbCh0aGlzLCBpdGVtLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLnJldHVybkRhdGEpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob3B0aW9ucy5yZXR1cm5EYXRhLCBib2R5KTtcbiAgICAgICAgYm9keSA9IG9wdGlvbnMucmV0dXJuRGF0YTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmIChhY3Rpb25PcHRpb25zLmZpbHRlci5jYWxsKHRoaXMsIGJvZHksIG9wdGlvbnMpKSB7XG5cbiAgICAgICAgYm9keSA9IGFjdGlvbk9wdGlvbnMubWFwLmNhbGwodGhpcywgYm9keSwgb3B0aW9ucyk7XG5cbiAgICAgICAgbGV0IG5ld0JvZHkgPSBvcHRpb25zLnJldHVybkRhdGE7XG5cbiAgICAgICAgaWYgKG5ld0JvZHkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5ld0JvZHkuJHNldERhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG5ld0JvZHkuJHNldERhdGEoYm9keSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3Qm9keSwgYm9keSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0JvZHkgPSBhY3Rpb25PcHRpb25zLnJlc3VsdEZhY3RvcnkuY2FsbCh0aGlzLCBib2R5LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvZHkgPSBuZXdCb2R5O1xuXG4gICAgICAgIC8vIElmIGl0J3MgbW9kZWxcbiAgICAgICAgaWYgKGJvZHkuJHJlc291cmNlKSB7XG4gICAgICAgICAgYm9keS4kcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgIGJvZHkuJHByb21pc2UgPSBvcHRpb25zLm1haW5Qcm9taXNlO1xuICAgICAgICAgIGJvZHkuJGFib3J0ID0gKCkgPT4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGJvZHkgPSBudWxsO1xuXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuJF9jYW5TZXRJbnRlcm5hbERhdGEob3B0aW9ucykpIHtcbiAgICAgIG9wdGlvbnMucmV0dXJuRGF0YS4kcmVzb2x2ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmFjdGlvbk9wdGlvbnMuYXNSZXNvdXJjZVJlc3BvbnNlKSB7XG4gICAgICByZXNwLmJvZHkgPSBib2R5O1xuICAgICAgYm9keSA9IHJlc3A7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5vblN1Y2Nlc3MpIHtcbiAgICAgIG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5vblN1Y2Nlc3MoYm9keSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICBwcm90ZWN0ZWQgJGhhbmRsZUVycm9yUmVzcG9uc2Uob3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIsIHJlc3A6IElSZXNvdXJjZVJlc3BvbnNlKTogYW55IHtcblxuICAgIGlmIChvcHRpb25zLnJldHVybkRhdGEgJiYgdGhpcy4kX2NhblNldEludGVybmFsRGF0YShvcHRpb25zKSkge1xuICAgICAgb3B0aW9ucy5yZXR1cm5EYXRhLiRyZXNvbHZlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5vbkVycm9yKSB7XG4gICAgICBvcHRpb25zLmFjdGlvbkF0dHJpYnV0ZXMub25FcnJvcihyZXNwKTtcbiAgICB9XG5cbiAgICB0aHJvdyByZXNwO1xuICB9XG5cbiAgcHJvdGVjdGVkICRzZXRSZXF1ZXN0T3B0aW9uc1VybChvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IHZvaWQge1xuXG4gICAgY29uc3Qgcm8gPSBvcHRpb25zLnJlcXVlc3RPcHRpb25zO1xuXG4gICAgaWYgKCFyby51cmwpIHtcbiAgICAgIHJvLnVybCA9XG4gICAgICAgIG9wdGlvbnMucmVzb2x2ZWRPcHRpb25zLnVybCArXG4gICAgICAgIG9wdGlvbnMucmVzb2x2ZWRPcHRpb25zLnBhdGhQcmVmaXggK1xuICAgICAgICBvcHRpb25zLnJlc29sdmVkT3B0aW9ucy5wYXRoO1xuICAgIH1cblxuXG4gICAgb3B0aW9ucy51c2VkSW5QYXRoID0ge307XG5cbiAgICBjb25zdCBwYXJhbXMgPSBSZXNvdXJjZUhlbHBlci5kZWZhdWx0cyhvcHRpb25zLmFjdGlvbkF0dHJpYnV0ZXMucGFyYW1zLCBvcHRpb25zLnJlc29sdmVkT3B0aW9ucy5wYXJhbXMpO1xuICAgIGNvbnN0IHBhdGhQYXJhbXMgPSByby51cmwubWF0Y2goL3soW159XSopfS9nKSB8fCBbXTtcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoUGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXRoUGFyYW0gPSBwYXRoUGFyYW1zW2ldO1xuXG4gICAgICBsZXQgcGF0aEtleSA9IHBhdGhQYXJhbS5zdWJzdHIoMSwgcGF0aFBhcmFtLmxlbmd0aCAtIDIpO1xuICAgICAgY29uc3QgaXNNYW5kYXRvcnkgPSBwYXRoS2V5WzBdID09PSAnISc7XG4gICAgICBpZiAoaXNNYW5kYXRvcnkpIHtcbiAgICAgICAgcGF0aEtleSA9IHBhdGhLZXkuc3Vic3RyKDEpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvbmx5UGF0aFBhcmFtID0gcGF0aEtleVswXSA9PT0gJzonO1xuICAgICAgaWYgKG9ubHlQYXRoUGFyYW0pIHtcbiAgICAgICAgcGF0aEtleSA9IHBhdGhLZXkuc3Vic3RyKDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5hY3Rpb25BdHRyaWJ1dGVzLnF1ZXJ5ICYmIG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5xdWVyeSA9PT0gb3B0aW9ucy5hY3Rpb25BdHRyaWJ1dGVzLnBhcmFtcykge1xuICAgICAgICBvcHRpb25zLnVzZWRJblBhdGhbcGF0aEtleV0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtc1twYXRoS2V5XTtcblxuICAgICAgaWYgKG9ubHlQYXRoUGFyYW0pIHtcbiAgICAgICAgZGVsZXRlIHBhcmFtc1twYXRoS2V5XTtcbiAgICAgIH1cblxuICAgICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICBpZiAoaXNNYW5kYXRvcnkpIHtcbiAgICAgICAgICBjb25zdCBjb25zb2xlTXNnID0gYE1hbmRhdG9yeSAke3BhdGhQYXJhbX0gcGF0aCBwYXJhbWV0ZXIgaXMgbWlzc2luZ2A7XG4gICAgICAgICAgY29uc29sZS53YXJuKGNvbnNvbGVNc2cpO1xuXG4gICAgICAgICAgLy8gc2hlbGwubWFpbk9ic2VydmFibGUgPSBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXI6IGFueSkgPT4ge1xuICAgICAgICAgIC8vICAgb2JzZXJ2ZXIuZXJyb3IobmV3IEVycm9yKGNvbnNvbGVNc2cpKTtcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gdGhpcy4kX3JlbGVhc2VNYWluRGVmZXJyZWRTdWJzY3JpYmVyKHNoZWxsKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY29uc29sZU1zZyk7XG4gICAgICAgIH1cblxuICAgICAgICByby51cmwgPSByby51cmwuc3Vic3RyKDAsIHJvLnVybC5pbmRleE9mKHBhdGhQYXJhbSkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgfVxuXG4gICAgICAvLyBSZXBsYWNpbmcgaW4gdGhlIHVybFxuICAgICAgcm8udXJsID0gcm8udXJsLnJlcGxhY2UocGF0aFBhcmFtLCB2YWx1ZSk7XG5cbiAgICB9XG5cbiAgICAvLyBSZW1vdmluZyBkb3VibGUgc2xhc2hlZCBmcm9tIGZpbmFsIHVybFxuICAgIHJvLnVybCA9IHJvLnVybC5yZXBsYWNlKC9cXC9cXC8rL2csICcvJyk7XG4gICAgaWYgKHJvLnVybC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgIHJvLnVybCA9IHJvLnVybC5yZXBsYWNlKCc6LycsICc6Ly8nKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICBpZiAob3B0aW9ucy5hY3Rpb25PcHRpb25zLnJlbW92ZVRyYWlsaW5nU2xhc2gpIHtcbiAgICAgIHdoaWxlIChyby51cmxbcm8udXJsLmxlbmd0aCAtIDFdID09PSAnLycpIHtcbiAgICAgICAgcm8udXJsID0gcm8udXJsLnN1YnN0cigwLCByby51cmwubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBwcm90ZWN0ZWQgJHNldFJlcXVlc3RPcHRpb25zQm9keShvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IHZvaWQge1xuXG4gICAgbGV0IGJvZHkgPSBvcHRpb25zLmFjdGlvbkF0dHJpYnV0ZXMuYm9keTtcblxuICAgIGlmICghYm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlYWxCb2R5VHlwZSA9IFJlc291cmNlSGVscGVyLmdldFJlYWxUeXBlT2YoYm9keSk7XG5cbiAgICBsZXQgYm9keU9rOiBib29sZWFuID0gcmVhbEJvZHlUeXBlID09PSBvcHRpb25zLmFjdGlvbk9wdGlvbnMucmVxdWVzdEJvZHlUeXBlO1xuXG4gICAgaWYgKCFib2R5T2spIHtcblxuICAgICAgaWYgKHJlYWxCb2R5VHlwZSA9PT0gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuSlNPTikge1xuXG4gICAgICAgIGlmIChvcHRpb25zLmFjdGlvbk9wdGlvbnMucmVxdWVzdEJvZHlUeXBlID09PSBSZXNvdXJjZVJlcXVlc3RCb2R5VHlwZS5GT1JNX0RBVEEpIHtcblxuICAgICAgICAgIGNvbnN0IG5ld0JvZHkgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICAgIE9iamVjdC5rZXlzKGJvZHkpLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYm9keVtrZXldO1xuXG4gICAgICAgICAgICBpZiAoYm9keS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgICAgICAgIGNvbnN0IGlzQXJyYXlPZkZpbGVzID0gdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiB2YWx1ZS5yZWR1Y2UoKGFjYywgZWxlbSkgPT4gYWNjICYmIGVsZW0gaW5zdGFuY2VvZiBGaWxlLCB0cnVlKTtcblxuICAgICAgICAgICAgICBpZiAoaXNBcnJheU9mRmlsZXMpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKChmOiBGaWxlLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICBuZXdCb2R5LmFwcGVuZChgJHtrZXl9WyR7aW5kZXh9XWAsIGYsIChmIGFzIEZpbGUpLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIG5ld0JvZHkuYXBwZW5kKGtleSwgdmFsdWUsICh2YWx1ZSBhcyBGaWxlKS5uYW1lKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5hY3Rpb25PcHRpb25zLnJvb3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgbmV3Qm9keS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWN0aW9uT3B0aW9ucy5yb290Tm9kZSkge1xuICAgICAgICAgICAgbmV3Qm9keS5hcHBlbmQob3B0aW9ucy5hY3Rpb25PcHRpb25zLnJvb3ROb2RlLCBKU09OLnN0cmluZ2lmeShib2R5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYm9keSA9IG5ld0JvZHk7XG4gICAgICAgICAgYm9keU9rID0gdHJ1ZTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmICghYm9keU9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBub3QgY29udmVydCBib2R5Jyk7XG4gICAgfVxuXG4gICAgaWYgKCEoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSkge1xuICAgICAgLy8gQWRkIHJvb3Qgbm9kZSBpZiBuZWVkZWRcbiAgICAgIGlmIChvcHRpb25zLmFjdGlvbk9wdGlvbnMucm9vdE5vZGUpIHtcbiAgICAgICAgY29uc3QgbmV3Qm9keTogYW55ID0ge307XG4gICAgICAgIG5ld0JvZHlbb3B0aW9ucy5hY3Rpb25PcHRpb25zLnJvb3ROb2RlXSA9IGJvZHk7XG4gICAgICAgIGJvZHkgPSBuZXdCb2R5O1xuICAgICAgfVxuXG5cbiAgICAgIGlmICgob3B0aW9ucy5hY3Rpb25PcHRpb25zLnJlcXVlc3RCb2R5VHlwZSA9PT0gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuTk9ORSB8fFxuICAgICAgICAob3B0aW9ucy5hY3Rpb25PcHRpb25zLnJlcXVlc3RCb2R5VHlwZSA9PT0gUmVzb3VyY2VSZXF1ZXN0Qm9keVR5cGUuSlNPTiAmJlxuICAgICAgICB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoYm9keSkubGVuZ3RoID09PSAwKVxuICAgICkgJiYgIW9wdGlvbnMuYWN0aW9uT3B0aW9ucy5rZWVwRW1wdHlCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBvcHRpb25zLnJlcXVlc3RPcHRpb25zLmJvZHkgPSBib2R5O1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgJHNldFJlcXVlc3RPcHRpb25zUXVlcnkob3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIpOiB2b2lkIHtcblxuICAgIGxldCBvcSA9IG9wdGlvbnMuYWN0aW9uQXR0cmlidXRlcy5xdWVyeSB8fCB7fTtcbiAgICBpZiAob3B0aW9ucy5yZXNvbHZlZE9wdGlvbnMucXVlcnkpIHtcbiAgICAgIG9xID0gey4uLm9wdGlvbnMucmVzb2x2ZWRPcHRpb25zLnF1ZXJ5LCAuLi5vcX07XG4gICAgfVxuXG4gICAgaWYgKG9xKSB7XG4gICAgICBvcHRpb25zLnJlcXVlc3RPcHRpb25zLnF1ZXJ5ID0ge307XG4gICAgICBPYmplY3Qua2V5cyhvcSkuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG9xLmhhc093blByb3BlcnR5KGtleSkgJiYgIW9wdGlvbnMudXNlZEluUGF0aFtrZXldKSB7XG4gICAgICAgICAgdGhpcy4kYXBwZW5kUXVlcnlQYXJhbXMob3B0aW9ucy5yZXF1ZXN0T3B0aW9ucy5xdWVyeSwga2V5LCBvcVtrZXldLCBvcHRpb25zLnF1ZXJ5TWFwcGluZ01ldGhvZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmFjdGlvbk9wdGlvbnMuYWRkVGltZXN0YW1wKSB7XG4gICAgICBvcHRpb25zLnJlcXVlc3RPcHRpb25zLnF1ZXJ5ID0gb3B0aW9ucy5yZXF1ZXN0T3B0aW9ucy5xdWVyeSB8fCB7fTtcbiAgICAgIHRoaXMuJGFwcGVuZFF1ZXJ5UGFyYW1zKFxuICAgICAgICBvcHRpb25zLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICBvcHRpb25zLmFjdGlvbk9wdGlvbnMuYWRkVGltZXN0YW1wIGFzIHN0cmluZyxcbiAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygxMCksXG4gICAgICAgIG9wdGlvbnMucXVlcnlNYXBwaW5nTWV0aG9kKTtcbiAgICB9XG5cbiAgfVxuXG4gIHByb3RlY3RlZCAkYXBwZW5kUXVlcnlQYXJhbXMocXVlcnk6IHsgW3Byb3A6IHN0cmluZ106IHN0cmluZyB8IGFueVtdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFueSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU1hcHBpbmdNZXRob2Q6IFJlc291cmNlUXVlcnlNYXBwaW5nTWV0aG9kKTogdm9pZCB7XG5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICBxdWVyeVtrZXldID0gdmFsdWUudG9JU09TdHJpbmcoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cbiAgICAgIHN3aXRjaCAocXVlcnlNYXBwaW5nTWV0aG9kKSB7XG5cbiAgICAgICAgY2FzZSBSZXNvdXJjZVF1ZXJ5TWFwcGluZ01ldGhvZC5QbGFpbjpcblxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcXVlcnlba2V5XSA9IHZhbHVlLmpvaW4oJywnKTtcbiAgICAgICAgICAgIC8vIGZvciAoY29uc3QgYXJyVmFsdWUgb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vICAgcXVlcnlba2V5XSA9IGFyclZhbHVlO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIC8vLyBDb252ZXJ0IGRhdGVzIHRvIElTTyBmb3JtYXQgc3RyaW5nXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjYXNlIFJlc291cmNlUXVlcnlNYXBwaW5nTWV0aG9kLkJyYWNrZXQ6XG4gICAgICAgICAgLy8vIENvbnZlcnQgb2JqZWN0IGFuZCBhcnJheXMgdG8gcXVlcnkgcGFyYW1zXG4gICAgICAgICAgZm9yIChjb25zdCBrIGluIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgdGhpcy4kYXBwZW5kUXVlcnlQYXJhbXMocXVlcnksIGAke2tleX1bJHtrfV1gLCB2YWx1ZVtrXSwgcXVlcnlNYXBwaW5nTWV0aG9kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgY2FzZSBSZXNvdXJjZVF1ZXJ5TWFwcGluZ01ldGhvZC5KUXVlcnlQYXJhbXNCcmFja2V0OlxuICAgICAgICAgIC8vLyBDb252ZXJ0IG9iamVjdCBhbmQgYXJyYXlzIHRvIHF1ZXJ5IHBhcmFtcyBhY2NvcmRpbmcgdG8gJC5wYXJhbXNcbiAgICAgICAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICBsZXQgcGF0aCA9IGAke2tleX1bJHtrfV1gO1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlWzxhbnk+a10gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcGF0aCA9IGAke2tleX1bXWA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy4kYXBwZW5kUXVlcnlQYXJhbXMocXVlcnksIHBhdGgsIHZhbHVlW2tdLCBxdWVyeU1hcHBpbmdNZXRob2QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcXVlcnlba2V5XSA9IHZhbHVlO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgJF9zZXRSZXNvdXJjZUFjdGlvbklubmVyRGVmYXVsdHMob3B0aW9uczogSVJlc291cmNlQWN0aW9uSW5uZXIpIHtcbiAgICBjb25zdCBhY3Rpb25PcHRpb25zID0gb3B0aW9ucy5hY3Rpb25PcHRpb25zO1xuXG4gICAgLy8gU2V0dGluZyBkZWZhdWx0IHJlcXVlc3QgbWV0aG9kXG4gICAgaWYgKCFhY3Rpb25PcHRpb25zLm1ldGhvZCkge1xuICAgICAgYWN0aW9uT3B0aW9ucy5tZXRob2QgPSBSZXNvdXJjZVJlcXVlc3RNZXRob2QuR2V0O1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbkF0dHJpYnV0ZXMgPSBvcHRpb25zLmFjdGlvbkF0dHJpYnV0ZXM7XG5cbiAgICBpZiAoYWN0aW9uQXR0cmlidXRlcy5ib2R5KSB7XG5cbiAgICAgIC8vIFNldHRpbmcgZGVmYXVsdCByZXF1ZXN0IGNvbnRlbnQgdHlwZVxuICAgICAgaWYgKCFhY3Rpb25PcHRpb25zLnJlcXVlc3RCb2R5VHlwZSkge1xuICAgICAgICBhY3Rpb25PcHRpb25zLnJlcXVlc3RCb2R5VHlwZSA9IFJlc291cmNlSGVscGVyLmdldFJlYWxUeXBlT2YoYWN0aW9uQXR0cmlidXRlcy5ib2R5KTtcbiAgICAgIH1cblxuXG4gICAgICAvLyBTZXR0aW5nIHBhcmFtcyBhbmQgcXVlcnkgaWYgbmVlZGVkXG4gICAgICBpZiAoYWN0aW9uT3B0aW9ucy5yZXF1ZXN0Qm9keVR5cGUgPT09IFJlc291cmNlUmVxdWVzdEJvZHlUeXBlLkpTT04gJiZcbiAgICAgICAgdHlwZW9mIGFjdGlvbkF0dHJpYnV0ZXMuYm9keSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoYWN0aW9uQXR0cmlidXRlcy5ib2R5KSkge1xuXG4gICAgICAgIGlmICghYWN0aW9uQXR0cmlidXRlcy5wYXJhbXMpIHtcbiAgICAgICAgICBhY3Rpb25BdHRyaWJ1dGVzLnBhcmFtcyA9IGFjdGlvbkF0dHJpYnV0ZXMuYm9keTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMuaXNNb2RlbCA9ICEhYWN0aW9uQXR0cmlidXRlcy5ib2R5LiRyZXNvdXJjZTtcblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgYWN0aW9uQXR0cmlidXRlcy5wYXJhbXMgPSBhY3Rpb25BdHRyaWJ1dGVzLnBhcmFtcyB8fCB7fTtcblxuICAgIGlmICghYWN0aW9uQXR0cmlidXRlcy5xdWVyeSAmJiBhY3Rpb25PcHRpb25zLm1ldGhvZCA9PT0gUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLkdldCkge1xuICAgICAgYWN0aW9uQXR0cmlidXRlcy5xdWVyeSA9IGFjdGlvbkF0dHJpYnV0ZXMucGFyYW1zO1xuICAgIH1cblxuICAgIG9wdGlvbnMucXVlcnlNYXBwaW5nTWV0aG9kID0gYWN0aW9uT3B0aW9ucy5xdWVyeU1hcHBpbmdNZXRob2QgfHwgUmVzb3VyY2VHbG9iYWxDb25maWcucXVlcnlNYXBwaW5nTWV0aG9kO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgJF9zZXRSZXNvdXJjZUFjdGlvbk9wdGlvbkRlZmF1bHRzKG9wdGlvbnM6IElSZXNvdXJjZUFjdGlvbklubmVyKSB7XG5cbiAgICBjb25zdCBhY3Rpb25PcHRpb25zID0gb3B0aW9ucy5hY3Rpb25PcHRpb25zO1xuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMuZmlsdGVyKSkge1xuICAgICAgYWN0aW9uT3B0aW9ucy5maWx0ZXIgPSB0aGlzLiRmaWx0ZXI7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMubWFwKSkge1xuICAgICAgYWN0aW9uT3B0aW9ucy5tYXAgPSB0aGlzLiRtYXA7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMucmVzdWx0RmFjdG9yeSkpIHtcbiAgICAgIGFjdGlvbk9wdGlvbnMucmVzdWx0RmFjdG9yeSA9IHRoaXMuJHJlc3VsdEZhY3Rvcnk7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMucmVtb3ZlVHJhaWxpbmdTbGFzaCkpIHtcbiAgICAgIGFjdGlvbk9wdGlvbnMucmVtb3ZlVHJhaWxpbmdTbGFzaCA9IFJlc291cmNlR2xvYmFsQ29uZmlnLnJlbW92ZVRyYWlsaW5nU2xhc2g7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgYWN0aW9uT3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgPSBSZXNvdXJjZUdsb2JhbENvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMuYXNQcm9taXNlKSkge1xuICAgICAgYWN0aW9uT3B0aW9ucy5hc1Byb21pc2UgPSBSZXNvdXJjZUdsb2JhbENvbmZpZy5hc1Byb21pc2U7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMuYXNSZXNvdXJjZVJlc3BvbnNlKSkge1xuICAgICAgYWN0aW9uT3B0aW9ucy5hc1Jlc291cmNlUmVzcG9uc2UgPSBSZXNvdXJjZUdsb2JhbENvbmZpZy5hc1Jlc291cmNlUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMucmVzcG9uc2VCb2R5VHlwZSkpIHtcbiAgICAgIGFjdGlvbk9wdGlvbnMucmVzcG9uc2VCb2R5VHlwZSA9IFJlc291cmNlR2xvYmFsQ29uZmlnLnJlc3BvbnNlQm9keVR5cGU7XG4gICAgfVxuXG4gICAgaWYgKFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMubGVhbikpIHtcbiAgICAgIGFjdGlvbk9wdGlvbnMubGVhbiA9IFJlc291cmNlR2xvYmFsQ29uZmlnLmxlYW47XG5cbiAgICAgIGlmIChhY3Rpb25PcHRpb25zLm11dGF0ZUJvZHkgJiYgIWFjdGlvbk9wdGlvbnMuYXNQcm9taXNlICYmIFJlc291cmNlSGVscGVyLmlzTnVsbE9yVW5kZWZpbmVkKGFjdGlvbk9wdGlvbnMubGVhbikpIHtcbiAgICAgICAgYWN0aW9uT3B0aW9ucy5sZWFuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUmVzb3VyY2VIZWxwZXIuaXNOdWxsT3JVbmRlZmluZWQoYWN0aW9uT3B0aW9ucy5hZGRUaW1lc3RhbXApKSB7XG4gICAgICBhY3Rpb25PcHRpb25zLmFkZFRpbWVzdGFtcCA9IFJlc291cmNlR2xvYmFsQ29uZmlnLmFkZFRpbWVzdGFtcDtcblxuICAgICAgaWYgKGFjdGlvbk9wdGlvbnMuYWRkVGltZXN0YW1wICYmIHR5cGVvZiBhY3Rpb25PcHRpb25zLmFkZFRpbWVzdGFtcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgYWN0aW9uT3B0aW9ucy5hZGRUaW1lc3RhbXAgPSAndHMnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCAkX3NldFJlc29sdmVkT3B0aW9ucyhvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IFByb21pc2U8SVJlc291cmNlQWN0aW9uSW5uZXI+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy4kZ2V0VXJsKG9wdGlvbnMuYWN0aW9uT3B0aW9ucyksXG4gICAgICB0aGlzLiRnZXRQYXRoUHJlZml4KG9wdGlvbnMuYWN0aW9uT3B0aW9ucyksXG4gICAgICB0aGlzLiRnZXRQYXRoKG9wdGlvbnMuYWN0aW9uT3B0aW9ucyksXG4gICAgICB0aGlzLiRnZXRIZWFkZXJzKG9wdGlvbnMuYWN0aW9uT3B0aW9ucyksXG4gICAgICB0aGlzLiRnZXRCb2R5KG9wdGlvbnMuYWN0aW9uT3B0aW9ucyksXG4gICAgICB0aGlzLiRnZXRQYXJhbXMob3B0aW9ucy5hY3Rpb25PcHRpb25zKSxcbiAgICAgIHRoaXMuJGdldFF1ZXJ5KG9wdGlvbnMuYWN0aW9uT3B0aW9ucylcbiAgICBdKVxuICAgICAgLnRoZW4oKHJlc29sdmVkTWFpbjogYW55W10pID0+IHtcbiAgICAgICAgb3B0aW9ucy5yZXNvbHZlZE9wdGlvbnMgPSB7fTtcbiAgICAgICAgY29uc3QgciA9IG9wdGlvbnMucmVzb2x2ZWRPcHRpb25zO1xuICAgICAgICBbci51cmwsIHIucGF0aFByZWZpeCwgci5wYXRoLCByLmhlYWRlcnMsIHIuYm9keSwgci5wYXJhbXMsIHIucXVlcnldID0gcmVzb2x2ZWRNYWluO1xuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgJF9jcmVhdGVSZXF1ZXN0T3B0aW9ucyhvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IElSZXNvdXJjZUFjdGlvbklubmVyIHwgUHJvbWlzZTxJUmVzb3VyY2VBY3Rpb25Jbm5lcj4ge1xuXG4gICAgb3B0aW9ucy5yZXF1ZXN0T3B0aW9ucyA9IHt9O1xuXG4gICAgLy8gU3RlcCAxIHNldCBtYWluXG4gICAgb3B0aW9ucy5yZXF1ZXN0T3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLmFjdGlvbk9wdGlvbnMubWV0aG9kO1xuICAgIG9wdGlvbnMucmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMucmVzb2x2ZWRPcHRpb25zLmhlYWRlcnM7XG4gICAgb3B0aW9ucy5yZXF1ZXN0T3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgPSBvcHRpb25zLmFjdGlvbk9wdGlvbnMud2l0aENyZWRlbnRpYWxzO1xuICAgIG9wdGlvbnMucmVxdWVzdE9wdGlvbnMucmVzcG9uc2VCb2R5VHlwZSA9IG9wdGlvbnMuYWN0aW9uT3B0aW9ucy5yZXNwb25zZUJvZHlUeXBlO1xuICAgIG9wdGlvbnMucmVxdWVzdE9wdGlvbnMucmVxdWVzdEJvZHlUeXBlID0gb3B0aW9ucy5hY3Rpb25PcHRpb25zLnJlcXVlc3RCb2R5VHlwZTtcblxuICAgIC8vIFN0ZXAgMiBjcmVhdGUgdXJsXG4gICAgdGhpcy4kc2V0UmVxdWVzdE9wdGlvbnNVcmwob3B0aW9ucyk7XG5cbiAgICAvLyBTdGVwIDMgY3JlYXRlIGJvZHlcbiAgICB0aGlzLiRzZXRSZXF1ZXN0T3B0aW9uc0JvZHkob3B0aW9ucyk7XG5cbiAgICAvLyBTdGVwIDQgc2V0IHF1ZXJ5IHBhcmFtc1xuICAgIHRoaXMuJHNldFJlcXVlc3RPcHRpb25zUXVlcnkob3B0aW9ucyk7XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIHByb3RlY3RlZCAkX2NhblNldEludGVybmFsRGF0YShvcHRpb25zOiBJUmVzb3VyY2VBY3Rpb25Jbm5lcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBvcHRpb25zLnJldHVybkRhdGEgJiYgKCFvcHRpb25zLmFjdGlvbk9wdGlvbnMubGVhbiB8fCBvcHRpb25zLmlzTW9kZWwpO1xuICB9XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9SZXNvdXJjZS50cyIsImltcG9ydCB7IFJlc291cmNlUXVlcnlNYXBwaW5nTWV0aG9kLCBSZXNvdXJjZVJlc3BvbnNlQm9keVR5cGUgfSBmcm9tICcuL0RlY2xhcmF0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZUdsb2JhbENvbmZpZyB7XG4gIHN0YXRpYyB1cmw6IHN0cmluZyB8IFByb21pc2U8c3RyaW5nPiA9IG51bGw7XG4gIHN0YXRpYyBwYXRoUHJlZml4OiBzdHJpbmcgfCBQcm9taXNlPHN0cmluZz4gPSBudWxsO1xuICBzdGF0aWMgcGF0aDogc3RyaW5nIHwgUHJvbWlzZTxzdHJpbmc+ID0gbnVsbDtcbiAgc3RhdGljIGhlYWRlcnM6IGFueSB8IFByb21pc2U8YW55PiA9IG51bGw7XG4gIHN0YXRpYyBib2R5OiBhbnkgfCBQcm9taXNlPGFueT4gPSBudWxsO1xuICBzdGF0aWMgcGFyYW1zOiBhbnkgfCBQcm9taXNlPGFueT4gPSBudWxsO1xuICBzdGF0aWMgcXVlcnk6IGFueSB8IFByb21pc2U8YW55PiA9IG51bGw7XG5cbiAgc3RhdGljIHJlbW92ZVRyYWlsaW5nU2xhc2g6IGJvb2xlYW4gPSB0cnVlO1xuICBzdGF0aWMgYWRkVGltZXN0YW1wOiBib29sZWFuIHwgc3RyaW5nID0gZmFsc2U7XG4gIHN0YXRpYyB3aXRoQ3JlZGVudGlhbHM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc3RhdGljIGxlYW46IGJvb2xlYW4gPSBudWxsO1xuICBzdGF0aWMgYXNQcm9taXNlOiBib29sZWFuID0gdHJ1ZTtcbiAgLy8gc3RhdGljIHRvT2JzZXJ2YWJsZTogYm9vbGVhbiA9IG51bGw7XG4gIHN0YXRpYyBhc1Jlc291cmNlUmVzcG9uc2U6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc3RhdGljIHJlc3BvbnNlQm9keVR5cGU6IFJlc291cmNlUmVzcG9uc2VCb2R5VHlwZSA9IFJlc291cmNlUmVzcG9uc2VCb2R5VHlwZS5Kc29uO1xuXG5cbiAgc3RhdGljIHF1ZXJ5TWFwcGluZ01ldGhvZDogUmVzb3VyY2VRdWVyeU1hcHBpbmdNZXRob2QgPSBSZXNvdXJjZVF1ZXJ5TWFwcGluZ01ldGhvZC5QbGFpbjtcblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc291cmNlR2xvYmFsQ29uZmlnLnRzIiwiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL1Jlc291cmNlJztcbmltcG9ydCB7IElSZXNvdXJjZUFjdGlvbiwgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kIH0gZnJvbSAnLi9EZWNsYXJhdGlvbnMnO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBSZXNvdXJjZUFjdGlvbihtZXRob2RPcHRpb25zPzogSVJlc291cmNlQWN0aW9uKSB7XG5cbiAgbWV0aG9kT3B0aW9ucyA9IG1ldGhvZE9wdGlvbnMgfHwge307XG5cbiAgaWYgKG1ldGhvZE9wdGlvbnMubWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICBtZXRob2RPcHRpb25zLm1ldGhvZCA9IFJlc291cmNlUmVxdWVzdE1ldGhvZC5HZXQ7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogUmVzb3VyY2UsIHByb3BlcnR5S2V5OiBzdHJpbmcpIHtcblxuICAgICg8YW55PnRhcmdldClbcHJvcGVydHlLZXldID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKTogYW55IHtcblxuICAgICAgY29uc3QgY2FsbGJhY2tzOiBhbnkgPSBhcmdzLmZpbHRlcigoYXJnOiBhbnkpID0+IHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbicpO1xuICAgICAgY29uc3QgZGF0YTogYW55ID0gYXJncy5maWx0ZXIoKGFyZzogYW55KSAgPT4gdHlwZW9mIGFyZyAhPT0gJ2Z1bmN0aW9uJyk7XG5cbiAgICAgIGNvbnN0IGJvZHk6IGFueSA9IGRhdGFbMF07XG4gICAgICBjb25zdCBxdWVyeTogYW55ID0gZGF0YVsxXTtcbiAgICAgIGNvbnN0IHBhcmFtczogYW55ID0gZGF0YVsyXTtcbiAgICAgIGNvbnN0IG9uU3VjY2VzczogYW55ID0gY2FsbGJhY2tzWzBdO1xuICAgICAgY29uc3Qgb25FcnJvcjogYW55ID0gY2FsbGJhY2tzWzFdO1xuXG5cbiAgICAgIC8vdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xuICAgICAgY29uc3QgYWN0aW9uT3B0aW9uczogSVJlc291cmNlQWN0aW9uID0gey4uLnRoaXMuZ2V0UmVzb3VyY2VPcHRpb25zKCksIC4uLm1ldGhvZE9wdGlvbnN9O1xuXG5cbiAgICAgIC8vdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWludmFsaWQtdGhpc1xuICAgICAgcmV0dXJuIHRoaXMuJHJlc3RBY3Rpb24oe2FjdGlvbkF0dHJpYnV0ZXM6IHtib2R5LCBxdWVyeSwgcGFyYW1zLCBvblN1Y2Nlc3MsIG9uRXJyb3J9LCBhY3Rpb25PcHRpb25zfSk7XG5cbiAgICB9O1xuXG4gIH07XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9SZXNvdXJjZUFjdGlvbi50cyIsImV4cG9ydCAqIGZyb20gJy4vc3JjL0RlY2xhcmF0aW9ucyc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZSc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZUFjdGlvbic7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZUdsb2JhbENvbmZpZyc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZUhhbmRsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvUmVzb3VyY2VIZWxwZXInO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvUmVzb3VyY2VNb2RlbCc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZVBhcmFtcyc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9SZXNvdXJjZUNvbW1vbi9SZXNvdXJjZUNSVUQnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW5kZXgudHMiLCJpbXBvcnQgeyBJUmVzb3VyY2VIYW5kbGVyUmVzcG9uc2UsIElSZXNvdXJjZVJlcXVlc3QgfSBmcm9tICcuL0RlY2xhcmF0aW9ucyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXNvdXJjZUhhbmRsZXIge1xuICBhYnN0cmFjdCBoYW5kbGUocmVxOiBJUmVzb3VyY2VSZXF1ZXN0KTogSVJlc291cmNlSGFuZGxlclJlc3BvbnNlO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc291cmNlSGFuZGxlci50cyIsImltcG9ydCB7IFJlc291cmNlQ1JVRCB9IGZyb20gJy4vUmVzb3VyY2VDb21tb24vUmVzb3VyY2VDUlVEJztcbmltcG9ydCB7IFJlc291cmNlSGVscGVyIH0gZnJvbSAnLi9SZXNvdXJjZUhlbHBlcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXNvdXJjZU1vZGVsIHtcblxuICBzdGF0aWMgcmVzb3VyY2VJbnN0YW5jZTogUmVzb3VyY2VDUlVEPGFueSwgYW55LCBhbnk+ID0gbnVsbDtcblxuICBwcm90ZWN0ZWQgc3RhdGljIG1ldGhvZFF1ZXJ5OiBzdHJpbmcgPSAncXVlcnknO1xuICBwcm90ZWN0ZWQgc3RhdGljIG1ldGhvZEdldDogc3RyaW5nID0gJ2dldCc7XG4gIHByb3RlY3RlZCBzdGF0aWMgbWV0aG9kQ3JlYXRlOiBzdHJpbmcgPSAnY3JlYXRlJztcbiAgcHJvdGVjdGVkIHN0YXRpYyBtZXRob2RVcGRhdGU6IHN0cmluZyA9ICd1cGRhdGUnO1xuICBwcm90ZWN0ZWQgc3RhdGljIG1ldGhvZFJlbW92ZTogc3RyaW5nID0gJ3JlbW92ZSc7XG5cbiAgc3RhdGljIGdldChpZDogc3RyaW5nIHwgbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZSgpW3RoaXMubWV0aG9kR2V0XSh7aWR9KTtcbiAgfVxuXG4gIHN0YXRpYyBxdWVyeShxdWVyeT86IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW5zdGFuY2UoKVt0aGlzLm1ldGhvZFF1ZXJ5XShxdWVyeSk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlKGlkOiBzdHJpbmcgfCBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZSgpW3RoaXMubWV0aG9kUmVtb3ZlXSh7aWR9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldEluc3RhbmNlKCk6IGFueSB7XG4gICAgaWYgKCF0aGlzLnJlc291cmNlSW5zdGFuY2UpIHtcblxuICAgICAgY29uc3QgbW9kZWw6IFJlc291cmNlTW9kZWwgPSAobmV3ICh0aGlzIGFzIGFueSkoKSk7XG5cbiAgICAgIGlmICghbW9kZWwuJHJlc291cmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciByZXNvdXJjZSBpcyBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW1vZGVsLiRyZXNvdXJjZS5pbnN0YW5jZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgcmVzb3VyY2UgaXMgbm90IGNyZWF0ZWQgKGluamVjdCBpdCBzb21ld2hlcmUpJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzb3VyY2VJbnN0YW5jZSA9IChuZXcgKHRoaXMgYXMgYW55KSgpKS4kcmVzb3VyY2UuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VJbnN0YW5jZTtcbiAgfVxuXG4gIGFic3RyYWN0IHJlYWRvbmx5ICRyZXNvdXJjZTogYW55ID0gbnVsbDtcblxuICAkcmVzb2x2ZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICAkcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gbnVsbDtcbiAgJGFib3J0OiAoKSA9PiB2b2lkO1xuXG5cbiAgcHVibGljICRzZXREYXRhKGRhdGE6IGFueSkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgZGF0YSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyAkc2F2ZShxdWVyeT86IGFueSwgcGFyYW1zPzogYW55KSB7XG5cbiAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICByZXR1cm4gdGhpcy4kY3JlYXRlKHF1ZXJ5LCBwYXJhbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy4kdXBkYXRlKHF1ZXJ5LCBwYXJhbXMpO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljICRjcmVhdGUocXVlcnk/OiBhbnksIHBhcmFtcz86IGFueSkge1xuICAgIHJldHVybiB0aGlzLiRleGVjdXRlUmVzb3VyY2VNZXRob2QoKHRoaXMuY29uc3RydWN0b3IgYXMgYW55KS5tZXRob2RDcmVhdGUsIHF1ZXJ5LCBwYXJhbXMpO1xuICB9XG5cbiAgcHVibGljICR1cGRhdGUocXVlcnk/OiBhbnksIHBhcmFtcz86IGFueSkge1xuICAgIHJldHVybiB0aGlzLiRleGVjdXRlUmVzb3VyY2VNZXRob2QoKHRoaXMuY29uc3RydWN0b3IgYXMgYW55KS5tZXRob2RVcGRhdGUsIHF1ZXJ5LCBwYXJhbXMpO1xuICB9XG5cbiAgcHVibGljICRyZW1vdmUocXVlcnk/OiBhbnksIHBhcmFtcz86IGFueSkge1xuICAgIHJldHVybiB0aGlzLiRleGVjdXRlUmVzb3VyY2VNZXRob2QoKHRoaXMuY29uc3RydWN0b3IgYXMgYW55KS5tZXRob2RSZW1vdmUsIHF1ZXJ5LCBwYXJhbXMpO1xuICB9XG5cbiAgcHVibGljIHRvSlNPTigpOiBhbnkge1xuICAgIHJldHVybiBSZXNvdXJjZUhlbHBlci5jbGVhbkRhdGEodGhpcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgaXNOZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEoPGFueT50aGlzKVsnaWQnXTtcbiAgfVxuXG4gIHByb3RlY3RlZCAkZ2V0UmVzb3VyY2VXaXRoTWV0aG9kQ2hlY2sobWV0aG9kTmFtZTogc3RyaW5nKTogYW55IHtcblxuICAgIGlmICghdGhpcy4kcmVzb3VyY2UpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFlvdXIgUmVzb3VyY2UgaXMgbm90IGRlZmluZWRgKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdEluc3RhbmNlID0gdGhpcy4kcmVzb3VyY2UuaW5zdGFuY2U7XG5cbiAgICBpZiAoIXJlc3RJbnN0YW5jZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgWW91ciBSZXNvdXJjZSBpcyBub3QgZGVmaW5lZCBvciBub3QgY3JlYXRlZGApO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3RJbnN0YW5jZVttZXRob2ROYW1lXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgWW91ciBSZXNvdXJjZSBoYXMgbm8gaW1wbGVtZW50ZWQgJHttZXRob2ROYW1lfSBtZXRob2QuYCk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN0SW5zdGFuY2U7XG5cbiAgfVxuXG4gIHByb3RlY3RlZCAkZXhlY3V0ZVJlc291cmNlTWV0aG9kKG1ldGhvZE5hbWU6IHN0cmluZywgcXVlcnk/OiBhbnksIHBhcmFtcz86IGFueSkge1xuXG4gICAgY29uc3QgcmVzb3VyY2UgPSB0aGlzLiRnZXRSZXNvdXJjZVdpdGhNZXRob2RDaGVjayhtZXRob2ROYW1lKTtcblxuICAgIGlmIChyZXNvdXJjZSkge1xuICAgICAgcmVzb3VyY2VbbWV0aG9kTmFtZV0odGhpcywgcXVlcnksIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvUmVzb3VyY2VNb2RlbC50cyIsImltcG9ydCB7IElSZXNvdXJjZVBhcmFtcyB9IGZyb20gJy4vRGVjbGFyYXRpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIFJlc291cmNlUGFyYW1zKHBhcmFtczogSVJlc291cmNlUGFyYW1zID0ge30pIHtcblxuICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogYW55KSB7XG5cbiAgICB0YXJnZXQucHJvdG90eXBlLmdldFJlc291cmNlT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfTtcblxuICB9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc291cmNlUGFyYW1zLnRzIiwiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuLi9SZXNvdXJjZSc7XG5pbXBvcnQgeyBSZXNvdXJjZUFjdGlvbiB9IGZyb20gJy4uL1Jlc291cmNlQWN0aW9uJztcbmltcG9ydCB7IElSZXNvdXJjZU1ldGhvZCwgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kIH0gZnJvbSAnLi4vRGVjbGFyYXRpb25zJztcblxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVzb3VyY2VDUlVEPFRRdWVyeSwgVFNob3J0LCBURnVsbCwgVFF1ZXJ5UmVzdWx0ID0gVFNob3J0W10+IGV4dGVuZHMgUmVzb3VyY2Uge1xuXG4gIEBSZXNvdXJjZUFjdGlvbigpXG4gIHF1ZXJ5OiBJUmVzb3VyY2VNZXRob2Q8VFF1ZXJ5LCBUUXVlcnlSZXN1bHQ+O1xuXG4gIEBSZXNvdXJjZUFjdGlvbih7XG4gICAgcGF0aDogJy97IWlkfSdcbiAgfSlcbiAgZ2V0OiBJUmVzb3VyY2VNZXRob2Q8eyBpZDogYW55IH0sIFRGdWxsPjtcblxuICBAUmVzb3VyY2VBY3Rpb24oe1xuICAgIG1ldGhvZDogUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLlBvc3RcbiAgfSlcbiAgc2F2ZTogSVJlc291cmNlTWV0aG9kPFRGdWxsLCBURnVsbD47XG5cbiAgQFJlc291cmNlQWN0aW9uKHtcbiAgICBtZXRob2Q6IFJlc291cmNlUmVxdWVzdE1ldGhvZC5QdXQsXG4gICAgcGF0aDogJy97IWlkfSdcbiAgfSlcbiAgdXBkYXRlOiBJUmVzb3VyY2VNZXRob2Q8VEZ1bGwsIFRGdWxsPjtcblxuICBAUmVzb3VyY2VBY3Rpb24oe1xuICAgIG1ldGhvZDogUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLkRlbGV0ZSxcbiAgICBwYXRoOiAnL3shOmlkfSdcbiAgfSlcbiAgcmVtb3ZlOiBJUmVzb3VyY2VNZXRob2Q8eyBpZDogYW55IH0sIGFueT47XG5cbiAgQFJlc291cmNlQWN0aW9uKHtcbiAgICBtZXRob2Q6IFJlc291cmNlUmVxdWVzdE1ldGhvZC5QYXRjaCxcbiAgICBwYXRoOiAnL3shaWR9J1xuICB9KVxuICBwYXRjaDogSVJlc291cmNlTWV0aG9kPHsgaWQ6IGFueSB9ICYgUGFydGlhbDxURnVsbD4sIFRGdWxsPjtcblxuICAvLyBBbGlhcyB0byBzYXZlXG4gIGNyZWF0ZShkYXRhOiBURnVsbCwgY2FsbGJhY2s/OiAocmVzOiBURnVsbCkgPT4gYW55KTogUHJvbWlzZTxURnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnNhdmUoZGF0YSwgY2FsbGJhY2spO1xuICB9XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9SZXNvdXJjZUNvbW1vbi9SZXNvdXJjZUNSVUQudHMiXSwic291cmNlUm9vdCI6IiJ9
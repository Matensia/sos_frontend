(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("@angular/core"), require("@ngx-resource/core"), require("@angular/common/http"), require("rxjs/operators"));
	else if(typeof define === 'function' && define.amd)
		define(["@angular/core", "@ngx-resource/core", "@angular/common/http", "rxjs/operators"], factory);
	else if(typeof exports === 'object')
		exports["ngx-resource-handler-ngx-http"] = factory(require("@angular/core"), require("@ngx-resource/core"), require("@angular/common/http"), require("rxjs/operators"));
	else
		root["ngx-resource-handler-ngx-http"] = factory(root["@angular/core"], root["@ngx-resource/core"], root["@angular/common/http"], root["rxjs/operators"]);
})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 4);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_0__;

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceHandlerHttpClient; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__angular_common_http__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_operators__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ResourceHandlerAbstract__ = __webpack_require__(6);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ResourceHandlerHttpClient = /** @class */ (function (_super) {
    __extends(ResourceHandlerHttpClient, _super);
    function ResourceHandlerHttpClient(http) {
        var _this = _super.call(this) || this;
        _this.http = http;
        return _this;
    }
    ResourceHandlerHttpClient.prototype.request = function (request) {
        return this.http
            .request(request)
            .pipe(Object(__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__["filter"])(function (resp) { return resp.type === __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpEventType"].Response; }));
    };
    ResourceHandlerHttpClient.prototype.prepareRequest = function (req) {
        var method = 'GET';
        switch (req.method) {
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Get:
                method = 'GET';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Post:
                method = 'POST';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Put:
                method = 'PUT';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Delete:
                method = 'DELETE';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Head:
                method = 'HEAD';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Options:
                method = 'OPTIONS';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceRequestMethod"].Patch:
                method = 'PATCH';
        }
        var init = {
            withCredentials: req.withCredentials
        };
        switch (req.responseBodyType) {
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceResponseBodyType"].Json:
                init.responseType = 'json';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceResponseBodyType"].ArrayBuffer:
                init.responseType = 'arraybuffer';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__ngx_resource_core__["ResourceResponseBodyType"].Blob:
                init.responseType = 'blob';
                break;
            default:
                init.responseType = 'text';
        }
        if (req.headers) {
            init.headers = new __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpHeaders"](req.headers);
        }
        if (req.query) {
            init.params = new __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpParams"]({ fromObject: req.query });
        }
        return new __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpRequest"](method, req.url, req.body, init);
    };
    ResourceHandlerHttpClient.prototype.handleResponse = function (req, response) {
        var headers = {};
        var keys = response.headers.keys();
        keys.forEach(function (key) {
            headers[key] = response.headers.getAll(key);
        });
        return {
            status: response.status,
            body: response.body || response.error,
            headers: headers
        };
    };
    ResourceHandlerHttpClient = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpClient"]])
    ], ResourceHandlerHttpClient);
    return ResourceHandlerHttpClient;
}(__WEBPACK_IMPORTED_MODULE_4__ResourceHandlerAbstract__["a" /* ResourceHandlerAbstract */]));



/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceModule", function() { return ResourceModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__angular_common_http__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ngx_resource_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ngx_resource_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__ngx_resource_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_ResourceHandlerHttpClient__ = __webpack_require__(3);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "ResourceHandlerHttpClient", function() { return __WEBPACK_IMPORTED_MODULE_3__src_ResourceHandlerHttpClient__["a"]; });
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var ResourceModule = /** @class */ (function () {
    function ResourceModule() {
    }
    ResourceModule_1 = ResourceModule;
    /**
     * For root
     * @param {IResourceModuleConfig} config
     * @return {ModuleWithProviders}
     */
    ResourceModule.forRoot = function (config) {
        if (config === void 0) { config = {}; }
        return {
            ngModule: ResourceModule_1,
            providers: [
                config.handler || { provide: __WEBPACK_IMPORTED_MODULE_2__ngx_resource_core__["ResourceHandler"], useClass: __WEBPACK_IMPORTED_MODULE_3__src_ResourceHandlerHttpClient__["a" /* ResourceHandlerHttpClient */], deps: [__WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpClient"]] }
            ]
        };
    };
    /**
     * For child
     * @param {IResourceModuleConfig} config
     * @return {ModuleWithProviders}
     */
    ResourceModule.forChild = function (config) {
        if (config === void 0) { config = {}; }
        return {
            ngModule: ResourceModule_1,
            providers: [
                config.handler || { provide: __WEBPACK_IMPORTED_MODULE_2__ngx_resource_core__["ResourceHandler"], useClass: __WEBPACK_IMPORTED_MODULE_3__src_ResourceHandlerHttpClient__["a" /* ResourceHandlerHttpClient */], deps: [__WEBPACK_IMPORTED_MODULE_1__angular_common_http__["HttpClient"]] }
            ]
        };
    };
    ResourceModule = ResourceModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])()
    ], ResourceModule);
    return ResourceModule;
    var ResourceModule_1;
}());



/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceHandlerAbstract; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ngx_resource_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ngx_resource_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__ngx_resource_core__);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var ResourceHandlerAbstract = /** @class */ (function (_super) {
    __extends(ResourceHandlerAbstract, _super);
    function ResourceHandlerAbstract() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ResourceHandlerAbstract.prototype.handle = function (req) {
        var _this = this;
        var request = this.prepareRequest(req);
        var resp = {
            promise: null
        };
        resp.promise = new Promise(function (resolve, reject) {
            var subscription = _this.request(request)
                .subscribe(function (resp) {
                subscription = null;
                resolve(_this.handleResponse(req, resp));
            }, function (err) {
                subscription = null;
                reject(_this.handleResponse(req, err));
            });
            resp.abort = function () {
                if (subscription) {
                    subscription.unsubscribe();
                    subscription = null;
                }
            };
        });
        return resp;
    };
    ResourceHandlerAbstract = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])()
    ], ResourceHandlerAbstract);
    return ResourceHandlerAbstract;
}(__WEBPACK_IMPORTED_MODULE_1__ngx_resource_core__["ResourceHandler"]));



/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA1N2YwYWVkMjE1MzJjODg5NzRjOCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYW5ndWxhci9jb3JlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQG5neC1yZXNvdXJjZS9jb3JlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIiIsIndlYnBhY2s6Ly8vLi9zcmMvUmVzb3VyY2VIYW5kbGVySHR0cENsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyeGpzL29wZXJhdG9yc1wiIiwid2VicGFjazovLy8uL3NyYy9SZXNvdXJjZUhhbmRsZXJBYnN0cmFjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O0FDN0RBLCtDOzs7Ozs7QUNBQSwrQzs7Ozs7O0FDQUEsK0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0EyQztBQVNiO0FBRVU7QUFNWjtBQUV3QztBQUdwRTtJQUErQyw2Q0FBdUI7SUFFcEUsbUNBQW9CLElBQWdCO1FBQXBDLFlBQ0UsaUJBQU8sU0FDUjtRQUZtQixVQUFJLEdBQUosSUFBSSxDQUFZOztJQUVwQyxDQUFDO0lBRVMsMkNBQU8sR0FBakIsVUFBa0IsT0FBWTtRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUk7YUFDYixPQUFPLENBQUMsT0FBTyxDQUFDO2FBQ2hCLElBQUksQ0FBQyw4REFBTSxDQUFDLFVBQUMsSUFBMEIsSUFBSyxXQUFJLENBQUMsSUFBSSxLQUFLLG1FQUFhLENBQUMsUUFBUSxFQUFwQyxDQUFvQyxDQUFDLENBQUMsQ0FBQztJQUN4RixDQUFDO0lBRVMsa0RBQWMsR0FBeEIsVUFBeUIsR0FBcUI7UUFFNUMsSUFBSSxNQUFNLEdBQVcsS0FBSyxDQUFDO1FBRTNCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBRW5CLEtBQUsseUVBQXFCLENBQUMsR0FBRztnQkFDNUIsTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFDZixLQUFLLENBQUM7WUFFUixLQUFLLHlFQUFxQixDQUFDLElBQUk7Z0JBQzdCLE1BQU0sR0FBRyxNQUFNLENBQUM7Z0JBQ2hCLEtBQUssQ0FBQztZQUVSLEtBQUsseUVBQXFCLENBQUMsR0FBRztnQkFDNUIsTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFDZixLQUFLLENBQUM7WUFFUixLQUFLLHlFQUFxQixDQUFDLE1BQU07Z0JBQy9CLE1BQU0sR0FBRyxRQUFRLENBQUM7Z0JBQ2xCLEtBQUssQ0FBQztZQUVSLEtBQUsseUVBQXFCLENBQUMsSUFBSTtnQkFDN0IsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDaEIsS0FBSyxDQUFDO1lBRVIsS0FBSyx5RUFBcUIsQ0FBQyxPQUFPO2dCQUNoQyxNQUFNLEdBQUcsU0FBUyxDQUFDO2dCQUNuQixLQUFLLENBQUM7WUFFUixLQUFLLHlFQUFxQixDQUFDLEtBQUs7Z0JBQzlCLE1BQU0sR0FBRyxPQUFPLENBQUM7UUFFckIsQ0FBQztRQUVELElBQU0sSUFBSSxHQUFxQjtZQUM3QixlQUFlLEVBQUUsR0FBRyxDQUFDLGVBQWU7U0FDckMsQ0FBQztRQUVGLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFFN0IsS0FBSyw0RUFBd0IsQ0FBQyxJQUFJO2dCQUNoQyxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztnQkFDM0IsS0FBSyxDQUFDO1lBRVIsS0FBSyw0RUFBd0IsQ0FBQyxXQUFXO2dCQUN2QyxJQUFJLENBQUMsWUFBWSxHQUFHLGFBQWEsQ0FBQztnQkFDbEMsS0FBSyxDQUFDO1lBRVIsS0FBSyw0RUFBd0IsQ0FBQyxJQUFJO2dCQUNoQyxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztnQkFDM0IsS0FBSyxDQUFDO1lBRVI7Z0JBQ0UsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7UUFFL0IsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxpRUFBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZ0VBQVUsQ0FBQyxFQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQztRQUN4RCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksaUVBQVcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRTFELENBQUM7SUFFUyxrREFBYyxHQUF4QixVQUF5QixHQUFxQixFQUFFLFFBQStDO1FBRTdGLElBQU0sT0FBTyxHQUFRLEVBQUUsQ0FBQztRQUN4QixJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFXO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQztZQUNMLE1BQU0sRUFBRSxRQUFRLENBQUMsTUFBTTtZQUN2QixJQUFJLEVBQUcsUUFBOEIsQ0FBQyxJQUFJLElBQUssUUFBOEIsQ0FBQyxLQUFLO1lBQ25GLE9BQU8sRUFBRSxPQUFPO1NBQ2pCLENBQUM7SUFDSixDQUFDO0lBL0ZVLHlCQUF5QjtRQURyQyxpRUFBVSxFQUFFO3lDQUdlLGdFQUFVO09BRnpCLHlCQUF5QixDQWlHckM7SUFBRCxnQ0FBQztDQUFBLENBakc4Qyx5RkFBdUIsR0FpR3JFO0FBakdxQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJrQztBQUN0QjtBQUNHO0FBQ3VCO0FBRTVCO0FBT2hEO0lBQUE7SUE2QkEsQ0FBQzt1QkE3QlksY0FBYztJQUV6Qjs7OztPQUlHO0lBQ0ksc0JBQU8sR0FBZCxVQUFlLE1BQWtDO1FBQWxDLG9DQUFrQztRQUMvQyxNQUFNLENBQUM7WUFDTCxRQUFRLEVBQUUsZ0JBQWM7WUFDeEIsU0FBUyxFQUFFO2dCQUNULE1BQU0sQ0FBQyxPQUFPLElBQUksRUFBQyxPQUFPLEVBQUUsbUVBQWUsRUFBRSxRQUFRLEVBQUUsaUdBQXlCLEVBQUUsSUFBSSxFQUFFLENBQUMsZ0VBQVUsQ0FBQyxFQUFDO2FBQ3RHO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksdUJBQVEsR0FBZixVQUFnQixNQUFrQztRQUFsQyxvQ0FBa0M7UUFDaEQsTUFBTSxDQUFDO1lBQ0wsUUFBUSxFQUFFLGdCQUFjO1lBQ3hCLFNBQVMsRUFBRTtnQkFDVCxNQUFNLENBQUMsT0FBTyxJQUFJLEVBQUMsT0FBTyxFQUFFLG1FQUFlLEVBQUUsUUFBUSxFQUFFLGlHQUF5QixFQUFFLElBQUksRUFBRSxDQUFDLGdFQUFVLENBQUMsRUFBQzthQUN0RztTQUNGLENBQUM7SUFDSixDQUFDO0lBNUJVLGNBQWM7UUFEMUIsK0RBQVEsRUFBRTtPQUNFLGNBQWMsQ0E2QjFCO0lBQUQscUJBQUM7O0NBQUE7QUE3QjBCOzs7Ozs7O0FDWjNCLCtDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQTJDO0FBRXlFO0FBR3BIO0lBQXNELDJDQUFlO0lBQXJFOztJQTRDQSxDQUFDO0lBekNDLHdDQUFNLEdBQU4sVUFBTyxHQUFxQjtRQUE1QixpQkFpQ0M7UUEvQkMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUV6QyxJQUFNLElBQUksR0FBNkI7WUFDckMsT0FBTyxFQUFFLElBQUk7U0FDZCxDQUFDO1FBRUYsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO1lBRXpDLElBQUksWUFBWSxHQUFHLEtBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO2lCQUNyQyxTQUFTLENBQ1IsVUFBQyxJQUFTO2dCQUNSLFlBQVksR0FBRyxJQUFJLENBQUM7Z0JBQ3BCLE9BQU8sQ0FBQyxLQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFDLENBQUMsRUFDRCxVQUFDLEdBQVE7Z0JBQ1AsWUFBWSxHQUFHLElBQUksQ0FBQztnQkFDcEIsTUFBTSxDQUFDLEtBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUNGLENBQUM7WUFFSixJQUFJLENBQUMsS0FBSyxHQUFHO2dCQUNYLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7b0JBQ2pCLFlBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQztvQkFDM0IsWUFBWSxHQUFHLElBQUksQ0FBQztnQkFDdEIsQ0FBQztZQUNILENBQUMsQ0FBQztRQUVKLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVkLENBQUM7SUFwQ21CLHVCQUF1QjtRQUQ1QyxpRUFBVSxFQUFFO09BQ1MsdUJBQXVCLENBNEM1QztJQUFELDhCQUFDO0NBQUEsQ0E1Q3FELG1FQUFlLEdBNENwRTtBQTVDNEMiLCJmaWxlIjoiaGFuZGxlci1uZ3gtaHR0cC51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQG5neC1yZXNvdXJjZS9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIiksIHJlcXVpcmUoXCJyeGpzL29wZXJhdG9yc1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAYW5ndWxhci9jb3JlXCIsIFwiQG5neC1yZXNvdXJjZS9jb3JlXCIsIFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIiwgXCJyeGpzL29wZXJhdG9yc1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJuZ3gtcmVzb3VyY2UtaGFuZGxlci1uZ3gtaHR0cFwiXSA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAbmd4LXJlc291cmNlL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb24vaHR0cFwiKSwgcmVxdWlyZShcInJ4anMvb3BlcmF0b3JzXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJuZ3gtcmVzb3VyY2UtaGFuZGxlci1uZ3gtaHR0cFwiXSA9IGZhY3Rvcnkocm9vdFtcIkBhbmd1bGFyL2NvcmVcIl0sIHJvb3RbXCJAbmd4LXJlc291cmNlL2NvcmVcIl0sIHJvb3RbXCJAYW5ndWxhci9jb21tb24vaHR0cFwiXSwgcm9vdFtcInJ4anMvb3BlcmF0b3JzXCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNTdmMGFlZDIxNTMyYzg4OTc0YzgiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAbmd4LXJlc291cmNlL2NvcmVcIlxuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBIdHRwQ2xpZW50LFxuICBIdHRwRXJyb3JSZXNwb25zZSxcbiAgSHR0cEV2ZW50VHlwZSxcbiAgSHR0cEhlYWRlcnMsXG4gIEh0dHBQYXJhbXMsXG4gIEh0dHBSZXF1ZXN0LFxuICBIdHRwUmVzcG9uc2Vcbn0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgSVJlc291cmNlUmVxdWVzdCxcbiAgSVJlc291cmNlUmVzcG9uc2UsXG4gIFJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgUmVzb3VyY2VSZXNwb25zZUJvZHlUeXBlXG59IGZyb20gJ0BuZ3gtcmVzb3VyY2UvY29yZSc7XG5cbmltcG9ydCB7IFJlc291cmNlSGFuZGxlckFic3RyYWN0IH0gZnJvbSAnLi9SZXNvdXJjZUhhbmRsZXJBYnN0cmFjdCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBSZXNvdXJjZUhhbmRsZXJIdHRwQ2xpZW50IGV4dGVuZHMgUmVzb3VyY2VIYW5kbGVyQWJzdHJhY3Qge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cDogSHR0cENsaWVudCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVxdWVzdChyZXF1ZXN0OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5yZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAucGlwZShmaWx0ZXIoKHJlc3A6IEh0dHBSZXNwb25zZTxvYmplY3Q+KSA9PiByZXNwLnR5cGUgPT09IEh0dHBFdmVudFR5cGUuUmVzcG9uc2UpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwcmVwYXJlUmVxdWVzdChyZXE6IElSZXNvdXJjZVJlcXVlc3QpOiBIdHRwUmVxdWVzdDxhbnk+IHtcblxuICAgIGxldCBtZXRob2Q6IHN0cmluZyA9ICdHRVQnO1xuXG4gICAgc3dpdGNoIChyZXEubWV0aG9kKSB7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLkdldDpcbiAgICAgICAgbWV0aG9kID0gJ0dFVCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFJlc291cmNlUmVxdWVzdE1ldGhvZC5Qb3N0OlxuICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFJlc291cmNlUmVxdWVzdE1ldGhvZC5QdXQ6XG4gICAgICAgIG1ldGhvZCA9ICdQVVQnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSZXNvdXJjZVJlcXVlc3RNZXRob2QuRGVsZXRlOlxuICAgICAgICBtZXRob2QgPSAnREVMRVRFJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLkhlYWQ6XG4gICAgICAgIG1ldGhvZCA9ICdIRUFEJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLk9wdGlvbnM6XG4gICAgICAgIG1ldGhvZCA9ICdPUFRJT05TJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXF1ZXN0TWV0aG9kLlBhdGNoOlxuICAgICAgICBtZXRob2QgPSAnUEFUQ0gnO1xuXG4gICAgfVxuXG4gICAgY29uc3QgaW5pdDogSUh0dHBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgIHdpdGhDcmVkZW50aWFsczogcmVxLndpdGhDcmVkZW50aWFsc1xuICAgIH07XG5cbiAgICBzd2l0Y2ggKHJlcS5yZXNwb25zZUJvZHlUeXBlKSB7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXNwb25zZUJvZHlUeXBlLkpzb246XG4gICAgICAgIGluaXQucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSZXNvdXJjZVJlc3BvbnNlQm9keVR5cGUuQXJyYXlCdWZmZXI6XG4gICAgICAgIGluaXQucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUmVzb3VyY2VSZXNwb25zZUJvZHlUeXBlLkJsb2I6XG4gICAgICAgIGluaXQucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaW5pdC5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG5cbiAgICB9XG5cbiAgICBpZiAocmVxLmhlYWRlcnMpIHtcbiAgICAgIGluaXQuaGVhZGVycyA9IG5ldyBIdHRwSGVhZGVycyhyZXEuaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHJlcS5xdWVyeSkge1xuICAgICAgaW5pdC5wYXJhbXMgPSBuZXcgSHR0cFBhcmFtcyh7ZnJvbU9iamVjdDogcmVxLnF1ZXJ5fSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBIdHRwUmVxdWVzdChtZXRob2QsIHJlcS51cmwsIHJlcS5ib2R5LCBpbml0KTtcblxuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZVJlc3BvbnNlKHJlcTogSVJlc291cmNlUmVxdWVzdCwgcmVzcG9uc2U6IEh0dHBSZXNwb25zZTxhbnk+IHwgSHR0cEVycm9yUmVzcG9uc2UpOiBJUmVzb3VyY2VSZXNwb25zZSB7XG5cbiAgICBjb25zdCBoZWFkZXJzOiBhbnkgPSB7fTtcbiAgICBjb25zdCBrZXlzID0gcmVzcG9uc2UuaGVhZGVycy5rZXlzKCk7XG4gICAga2V5cy5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgaGVhZGVyc1trZXldID0gcmVzcG9uc2UuaGVhZGVycy5nZXRBbGwoa2V5KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIGJvZHk6IChyZXNwb25zZSBhcyBIdHRwUmVzcG9uc2U8YW55PikuYm9keSB8fCAocmVzcG9uc2UgYXMgSHR0cEVycm9yUmVzcG9uc2UpLmVycm9yLFxuICAgICAgaGVhZGVyczogaGVhZGVyc1xuICAgIH07XG4gIH1cblxufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUh0dHBSZXF1ZXN0SW5pdCB7XG4gIGhlYWRlcnM/OiBIdHRwSGVhZGVycztcbiAgcGFyYW1zPzogSHR0cFBhcmFtcztcbiAgcmVzcG9uc2VUeXBlPzogJ2FycmF5YnVmZmVyJyB8ICdibG9iJyB8ICdqc29uJyB8ICd0ZXh0JztcbiAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9SZXNvdXJjZUhhbmRsZXJIdHRwQ2xpZW50LnRzIiwiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUsIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgUmVzb3VyY2VIYW5kbGVyIH0gZnJvbSAnQG5neC1yZXNvdXJjZS9jb3JlJztcbmltcG9ydCB7IFJlc291cmNlSGFuZGxlckh0dHBDbGllbnQgfSBmcm9tICcuL3NyYy9SZXNvdXJjZUhhbmRsZXJIdHRwQ2xpZW50JztcblxuZXhwb3J0ICogZnJvbSAnLi9zcmMvUmVzb3VyY2VIYW5kbGVySHR0cENsaWVudCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTW9kdWxlQ29uZmlnIHtcbiAgaGFuZGxlcj86IFByb3ZpZGVyO1xufVxuXG5ATmdNb2R1bGUoKVxuZXhwb3J0IGNsYXNzIFJlc291cmNlTW9kdWxlIHtcblxuICAvKipcbiAgICogRm9yIHJvb3RcbiAgICogQHBhcmFtIHtJUmVzb3VyY2VNb2R1bGVDb25maWd9IGNvbmZpZ1xuICAgKiBAcmV0dXJuIHtNb2R1bGVXaXRoUHJvdmlkZXJzfVxuICAgKi9cbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBJUmVzb3VyY2VNb2R1bGVDb25maWcgPSB7fSk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogUmVzb3VyY2VNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgY29uZmlnLmhhbmRsZXIgfHwge3Byb3ZpZGU6IFJlc291cmNlSGFuZGxlciwgdXNlQ2xhc3M6IFJlc291cmNlSGFuZGxlckh0dHBDbGllbnQsIGRlcHM6IFtIdHRwQ2xpZW50XX1cbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEZvciBjaGlsZFxuICAgKiBAcGFyYW0ge0lSZXNvdXJjZU1vZHVsZUNvbmZpZ30gY29uZmlnXG4gICAqIEByZXR1cm4ge01vZHVsZVdpdGhQcm92aWRlcnN9XG4gICAqL1xuICBzdGF0aWMgZm9yQ2hpbGQoY29uZmlnOiBJUmVzb3VyY2VNb2R1bGVDb25maWcgPSB7fSk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogUmVzb3VyY2VNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgY29uZmlnLmhhbmRsZXIgfHwge3Byb3ZpZGU6IFJlc291cmNlSGFuZGxlciwgdXNlQ2xhc3M6IFJlc291cmNlSGFuZGxlckh0dHBDbGllbnQsIGRlcHM6IFtIdHRwQ2xpZW50XX1cbiAgICAgIF1cbiAgICB9O1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyeGpzL29wZXJhdG9yc1wiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IElSZXNvdXJjZUhhbmRsZXJSZXNwb25zZSwgSVJlc291cmNlUmVxdWVzdCwgSVJlc291cmNlUmVzcG9uc2UsIFJlc291cmNlSGFuZGxlciB9IGZyb20gJ0BuZ3gtcmVzb3VyY2UvY29yZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXNvdXJjZUhhbmRsZXJBYnN0cmFjdCBleHRlbmRzIFJlc291cmNlSGFuZGxlciB7XG5cblxuICBoYW5kbGUocmVxOiBJUmVzb3VyY2VSZXF1ZXN0KTogSVJlc291cmNlSGFuZGxlclJlc3BvbnNlIHtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSk7XG5cbiAgICBjb25zdCByZXNwOiBJUmVzb3VyY2VIYW5kbGVyUmVzcG9uc2UgPSB7XG4gICAgICBwcm9taXNlOiBudWxsXG4gICAgfTtcblxuICAgIHJlc3AucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgICAgbGV0IHN1YnNjcmlwdGlvbiA9IHRoaXMucmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgIChyZXNwOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMuaGFuZGxlUmVzcG9uc2UocmVxLCByZXNwKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICByZWplY3QodGhpcy5oYW5kbGVSZXNwb25zZShyZXEsIGVycikpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgcmVzcC5hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9KTtcblxuICAgIHJldHVybiByZXNwO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVxdWVzdChyZXF1ZXN0OiBhbnkpOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHByZXBhcmVSZXF1ZXN0KHJlcTogSVJlc291cmNlUmVxdWVzdCk6IGFueTtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgaGFuZGxlUmVzcG9uc2UocmVxOiBJUmVzb3VyY2VSZXF1ZXN0LCByZXNwb25zZTogYW55KTogSVJlc291cmNlUmVzcG9uc2U7XG5cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc291cmNlSGFuZGxlckFic3RyYWN0LnRzIl0sInNvdXJjZVJvb3QiOiIifQ==
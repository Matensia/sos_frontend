<!-- <mat-tab-group>
  <mat-tab
    *ngFor="let chat of chats; let i = index"
    label="{{ chat.idServicio }}"
  >
    <mat-card class="chat">
      <button
        class="close"
        (click)="closeChat(chat.idAsistencia)"
        mat-raised-button
        i18n-title
        title="Cancelar asistencia"
      >
        <mat-icon class="icon-delete">delete</mat-icon>
      </button>

      <h5 class="service_title">{{ chat.idServicio }}</h5>
      <p>Asistencia: {{ chat.idAsistencia }}</p>

      <div class="container" *ngFor="let dato of chat.dataChat; let i = index">
        <mat-icon>account_circle</mat-icon>
        <p>{{ dato.dato }}</p>
        <span class="time-right">{{ dato.fecha }}</span>
      </div>

      <div>
        <mat-form-field class="text" appearance="fill">
          <mat-label i18n>Mensaje</mat-label>
          <input
            matInput
            id="username"
            name="username"
            #message
            maxlength="50"
            i18n-placeholder
            placeholder="Inserte mensaje"
            #username
          />
        </mat-form-field>

        <button
          (click)="sendChat(username.value, chat.idAsistencia)"
          mat-fab
          color="primary"
          i18n-aria-label
          aria-label="Example icon button with a delete icon"
        >
          <mat-icon class="icon-chat">send</mat-icon>
        </button>
      </div>
    </mat-card>
  </mat-tab>
</mat-tab-group> -->

<!-- START CHAT ICON BUTTON -->

<button
  class="chat-button"
  (click)="showChatService = !showChatService"
  mat-fab
  color="primary"
  aria-label="Chat"
  matBadge="8"
  matBadgePosition="before"
  matBadgeColor="primary"
  [matBadgeHidden]="hidden"
>
  <mat-icon>chat</mat-icon>
</button>
<!-- END CHAT ICON BUTTON -->

<mat-card class="chat-service-container" *ngIf="showChatService">
  <ng-container *ngFor="let chat of chats; let i = index">
    <button
      [ngClass]="
        !chatSeleccionado ||
        chatSeleccionado.idAsistencia !== chats[i].idAsistencia
          ? 'attendance-normal'
          : 'attendance-selected'
      "
      class="service-chat-button"
      (click)="viewChat(chat)"
      mat-raised-button
      #{{i}}
    >
      <span>{{ chat.idServicio }}</span>
    </button>
  </ng-container>
</mat-card>

<ng-container *ngIf="chatSeleccionado && showChatService">
  <mat-card class="chat-service-selected">
    <p class="service_title">{{ chatSeleccionado.idServicio }}</p>
    <p class="attendance_title">
      Asistencia: {{ chatSeleccionado.idAsistencia }}
    </p>

    <div class="chats-container">
      <div
        class="container"
        *ngFor="let dato of chatSeleccionado.dataChat; let i = index"
      >
        <mat-icon>account_circle</mat-icon>
        <p class="chat-message">{{ dato.dato }}</p>
        <span class="time-right">{{ dato.fecha }}</span>
      </div>
    </div>

    <mat-form-field class="form-input-message" appearance="fill">
      <mat-label class="input-message-title" i18n>Mensaje</mat-label>
      <input
        matInput
        id="username"
        name="username"
        #message
        maxlength="50"
        i18n-placeholder
        placeholder="Inserte mensaje"
        #username
        class="input-message"
      />
    </mat-form-field>
    <button
      (click)="sendChat(username.value, chatSeleccionado.idAsistencia)"
      mat-fab
      color="primary"
      i18n-aria-label
      class="send-btn"
    >
      <mat-icon class="icon-chat">send</mat-icon>
    </button>

    <button
      class="close"
      (click)="cancelAttendance(chatSeleccionado.idAsistencia)"
      mat-raised-button
      i18n-aria-label
      title="Cancelar asistencia"
    >
      <span>Cancelar asistencia</span>
    </button>
  </mat-card>
</ng-container>
